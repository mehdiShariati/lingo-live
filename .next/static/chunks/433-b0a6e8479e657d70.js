(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{2263:function(e,t,n){"use strict";n.d(t,{fy:function(){return ne}});var r,o,i,a,c,u,s,l,d,f,p,h,v,m,g,b,y,w={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},E=console,S={};Object.keys(w).forEach(function(e){S[e]=E[e]});var k="Datadog Browser SDK:",C={debug:S.debug.bind(E,k),log:S.log.bind(E,k),info:S.info.bind(E,k),warn:S.warn.bind(E,k),error:S.error.bind(E,k)},x="https://docs.datadoghq.com",T="".concat(x,"/real_user_monitoring/browser/troubleshooting"),R="More details:";function P(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(e){C.error(t,e)}}}var A=function(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},M=!1;function O(e){M=e}function _(e,t,n){var r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(c?L(r):r).apply(this,e)}}function L(e){return function(){return N(e,this,arguments)}}function N(e,t,n){try{return e.apply(t,n)}catch(e){if(I(e),c)try{c(e)}catch(e){I(e)}}}function I(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];M&&C.error.apply(C,A(["[MONITOR]"],e,!1))}function D(e,t){return -1!==e.indexOf(t)}function j(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach(function(e){return t.push(e)});else for(var n=0;n<e.length;n++)t.push(e[n]);return t}function U(e){return Object.keys(e).map(function(t){return e[t]})}function Q(e,t){return e.slice(0,t.length)===t}function F(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}),e}function V(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&("object"==typeof self?e=self:e="object"==typeof window?window:{}),e}var z=/[^\u0000-\u007F]/;function B(e){return z.test(e)?void 0!==window.TextEncoder?new TextEncoder().encode(e).length:new Blob([e]).size:e.length}function q(e,t){var n,r=V();return r.Zone&&"function"==typeof r.Zone.__symbol__&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}function $(e,t){return q(V(),"setTimeout")(L(e),t)}function H(e){q(V(),"clearTimeout")(e)}function W(e,t){return q(V(),"setInterval")(L(e),t)}function G(e){q(V(),"clearInterval")(e)}function Z(e,t,n){var r,o,i=!n||void 0===n.leading||n.leading,a=!n||void 0===n.trailing||n.trailing,c=!1;return{throttled:function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];if(c){r=n;return}i?e.apply(void 0,n):r=n,c=!0,o=$(function(){a&&r&&e.apply(void 0,r),c=!1,r=void 0},t)},cancel:function(){H(o),c=!1,r=void 0}}}function J(){}function K(e,t,n){if("object"!=typeof e||null===e)return JSON.stringify(e);var r=Y(Object.prototype),o=Y(Array.prototype),i=Y(Object.getPrototypeOf(e)),a=Y(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{r(),o(),i(),a()}}function Y(e){var t=e.toJSON;return t?(delete e.toJSON,function(){e.toJSON=t}):J}function X(e,t){return Object.keys(e).some(function(n){return e[n]===t})}function ee(e){return 0===Object.keys(e).length}function et(e){var t=0,n=Z(function(n){t=B(K(n)),e()},200),r=n.throttled,o=n.cancel,i=function(){o(),t=0};return{updateCustomerData:function(e){ee(e)?i():r(e)},resetCustomerData:i,getBytesCount:function(){return t},stop:function(){o()}}}function en(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function er(e,t,n){if(void 0===n&&(n=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var o=Array.isArray(e)?e:[],i=0;i<t.length;++i)o[i]=er(o[i],t[i],n);return o}var a="object"===en(e)?e:{};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(a[c]=er(a[c],t[c],n));return a}}function eo(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++){var o=t[r];null!=o&&(e=er(e,o))}return e}function ei(e,t){void 0===t&&(t=225280);var n=Y(Object.prototype),r=Y(Array.prototype),o=[],i=new WeakMap,a=ea(e,"$",void 0,o,i),c=JSON.stringify(a),u=c?c.length:0;if(u>t){ec(t,"discarded",e);return}for(;o.length>0&&u<t;){var s=o.shift(),l=0;if(Array.isArray(s.source))for(var d=0;d<s.source.length;d++){var f=ea(s.source[d],s.path,d,o,i);if(void 0!==f?u+=JSON.stringify(f).length:u+=4,u+=l,l=1,u>t){ec(t,"truncated",e);break}s.target[d]=f}else for(var d in s.source)if(Object.prototype.hasOwnProperty.call(s.source,d)){var f=ea(s.source[d],s.path,d,o,i);if(void 0!==f&&(u+=JSON.stringify(f).length+l+d.length+3,l=1),u>t){ec(t,"truncated",e);break}s.target[d]=f}}return n(),r(),a}function ea(e,t,n,r,o){var i=function(e){if(e&&"function"==typeof e.toJSON)try{return e.toJSON()}catch(e){}return e}(e);if(!i||"object"!=typeof i)return"bigint"==typeof i?"[BigInt] ".concat(i.toString()):"function"==typeof i?"[Function] ".concat(i.name||"unknown"):"symbol"==typeof i?"[Symbol] ".concat(i.description||i.toString()):i;var a=function(e){try{if(e instanceof Event)return{isTrusted:e.isTrusted};var t=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(t&&t[1])return"[".concat(t[1],"]")}catch(e){}return"[Unserializable]"}(i);if("[Object]"!==a&&"[Array]"!==a&&"[Error]"!==a)return a;if(o.has(e))return"[Reference seen at ".concat(o.get(e),"]");var c=void 0!==n?"".concat(t,".").concat(n):t,u=Array.isArray(i)?[]:{};return o.set(e,c),r.push({source:i,target:u,path:c}),u}function ec(e,t,n){C.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),n)}var eu=function(){function e(e){this.onFirstSubscribe=e,this.observers=[]}return e.prototype.subscribe=function(e){var t=this;return this.observers.push(e),1===this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:function(){t.observers=t.observers.filter(function(t){return e!==t}),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},e.prototype.notify=function(e){this.observers.forEach(function(t){return t(e)})},e}();function es(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new eu(function(t){var n=e.map(function(e){return e.subscribe(function(e){return t.notify(e)})});return function(){return n.forEach(function(e){return e.unsubscribe()})}})}function el(e){var t={},n=new eu,r={getContext:function(){return er(void 0,t)},setContext:function(o){"object"===en(o)?(t=ei(o),null==e||e.updateCustomerData(t)):r.clearContext(),n.notify()},setContextProperty:function(r,o){t[r]=ei(o),null==e||e.updateCustomerData(t),n.notify()},removeContextProperty:function(r){delete t[r],null==e||e.updateCustomerData(t),n.notify()},clearContext:function(){t={},null==e||e.resetCustomerData(),n.notify()},changeObservable:n};return r}var ed={GRANTED:"granted",NOT_GRANTED:"not-granted"};function ef(e,t,n,r,o){var i=void 0===o?{}:o,a=i.once,c=i.capture,u=i.passive,s=L(function(t){(t.isTrusted||t.__ddIsTrusted||e.allowUntrustedEvents)&&(a&&p(),r(t))}),l=u?{capture:c,passive:u}:c,d=window.EventTarget&&t instanceof EventTarget?window.EventTarget.prototype:t,f=q(d,"addEventListener");function p(){var e=q(d,"removeEventListener");n.forEach(function(n){return e.call(t,n,s,l)})}return n.forEach(function(e){return f.call(t,e,s,l)}),{stop:p}}var ep=[];function eh(e,t,n,r){var o="".concat("_dd_c","_").concat(n,"_").concat(r);function i(){var e=localStorage.getItem(o);return null!==e?JSON.parse(e):{}}ep.push(ef(e,window,["storage"],function(e){o===e.key&&t.setContext(i())},void 0)),t.changeObservable.subscribe(function(){localStorage.setItem(o,JSON.stringify(t.getContext()))}),t.setContext(eo(i(),t.getContext()))}function ev(e){var t=[],n=eC(e,"stack"),r=String(e);return n&&Q(n,r)&&(n=n.slice(r.length)),n&&n.split("\n").forEach(function(e){var n=function(e){var t=eb.exec(e);if(t){var n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),o=ey.exec(t[2]);return r&&o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||"?",line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}}(e)||function(e){var t=ew.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:"?",line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){var t=eE.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||"?",line:+t[3],url:t[2]}}(e)||function(e){var t=eS.exec(e);if(t){var n=t[3]&&t[3].indexOf(" > eval")>-1,r=ek.exec(t[3]);return n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||"?",line:t[4]?+t[4]:void 0,url:t[3]}}}(e);n&&(!n.func&&n.line&&(n.func="?"),t.push(n))}),{message:eC(e,"message"),name:eC(e,"name"),stack:t}}var em="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",eg="(?::(\\d+))",eb=RegExp("^\\s*at (.*?) ?\\(".concat(em).concat(eg,"?").concat(eg,"?\\)?\\s*$"),"i"),ey=new RegExp("\\((\\S*)".concat(eg).concat(eg,"\\)")),ew=RegExp("^\\s*at ?".concat(em).concat(eg,"?").concat(eg,"??\\s*$"),"i"),eE=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,eS=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,ek=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function eC(e,t){if("object"==typeof e&&e&&t in e){var n=e[t];return"string"==typeof n?n:void 0}}var ex=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function eT(){var e,t=Error();if(!t.stack)try{throw t}catch(e){}return N(function(){var n=ev(t);n.stack=n.stack.slice(2),e=eR(n)}),e}function eR(e){var t=eP(e);return e.stack.forEach(function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"",o=e.line?":".concat(e.line):"",i=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(n).concat(r," @ ").concat(e.url).concat(o).concat(i)}),t}function eP(e){return"".concat(e.name||"Error",": ").concat(e.message)}var eA="No stack, consider using an instance of Error";function eM(e){var t=e.stackTrace,n=e.originalError,r=e.handlingStack,o=e.startClocks,i=e.nonErrorPrefix,a=e.source,c=e.handling,u=e_(n),s=(null==t?void 0:t.message)&&(null==t?void 0:t.name)?t.message:u?"Empty message":"".concat(i," ").concat(K(ei(n))),l=void 0!==t&&(u||t.stack.length>0&&(t.stack.length>1||void 0!==t.stack[0].url))?eR(t):eA,d=u?eL(n,a):void 0,f=t?t.name:void 0,p=eO(n);return{startClocks:o,source:a,handling:c,handlingStack:r,originalError:n,type:f,message:s,stack:l,causes:d,fingerprint:p}}function eO(e){return e_(e)&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function e_(e){return e instanceof Error||"[object Error]"===Object.prototype.toString.call(e)}function eL(e,t){for(var n=e,r=[];e_(null==n?void 0:n.cause)&&r.length<10;){var o=ev(n.cause);r.push({message:n.cause.message,source:t,type:null==o?void 0:o.name,stack:o&&eR(o)}),n=n.cause}return r.length?r:void 0}(r=u||(u={})).WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",r.REMOTE_CONFIGURATION="remote_configuration",r.LONG_ANIMATION_FRAME="long_animation_frame",r.ANONYMOUS_USER_TRACKING="anonymous_user_tracking",r.ACTION_NAME_MASKING="action_name_masking",r.CONSISTENT_TRACE_SAMPLING="consistent_trace_sampling",r.DELAY_VIEWPORT_COLLECTION="delay_viewport_collection";var eN=new Set,eI="datadoghq.com",eD=["ddsource","ddtags"];function ej(){return new Date().getTime()}function eU(){return performance.now()}function eQ(){return{relative:eU(),timeStamp:ej()}}function eF(){return void 0===s&&(s=performance.timing.navigationStart),s}function eV(e,t){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}function ez(e){return 0!==e&&100*Math.random()<=e}function eB(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function eq(){var e=[];return{add:function(t){e.push(t)>500&&e.splice(0,1)},remove:function(t){eB(e,t)},drain:function(t){e.forEach(function(e){return e(t)}),e.length=0}}}var e$="configuration",eH="usage",eW=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],eG=["ddog-gov.com"],eZ=eq(),eJ=function(e){eZ.add(function(){return eJ(e)})};function eK(e,t){I(w.debug,e,t),eJ(F({type:"log",message:e,status:"debug"},t))}function eY(e,t){eJ(F({type:"log",status:"error"},function(e){if(e_(e)){var t=ev(e);return{error:{kind:t.name,stack:eR((t.stack=t.stack.filter(function(e){return!e.url||eW.some(function(t){return Q(e.url,t)})}),t))},message:t.message}}return{error:{stack:eA},message:"".concat("Uncaught"," ").concat(K(e))}}(e),t))}function eX(e){var t=F({},e);return["id","name","email"].forEach(function(e){e in t&&(t[e]=String(t[e]))}),t}function e0(e,t){t.silentMultipleInit||C.error("".concat(e," is already initialized."))}var e1={AGENT:"agent",CONSOLE:"console",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function e5(e,t,n){var r=n.getHandler(),o=Array.isArray(r)?r:[r];return e7[e]>=e7[n.getLevel()]&&D(o,t)}var e2={ok:"ok",debug:"debug",info:"info",notice:"notice",warn:"warn",error:"error",critical:"critical",alert:"alert",emerg:"emerg"},e7=((l={})[e2.ok]=0,l[e2.debug]=1,l[e2.info]=2,l[e2.notice]=4,l[e2.warn]=5,l[e2.error]=6,l[e2.critical]=7,l[e2.alert]=8,l[e2.emerg]=9,l);function e6(e,t){var n=(void 0===t?{}:t).includeMessage;return{stack:e.stack,kind:e.type,message:void 0!==n&&n?e.message:void 0,causes:e.causes,fingerprint:e.fingerprint,handling:e.handling}}var e4=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},e3={console:"console",http:"http"},e9=Object.keys(e2),e8=function(){function e(e,t,n,r,o,i){void 0===r&&(r=e3.http),void 0===o&&(o=e2.debug),void 0===i&&(i={}),this.handleLogStrategy=e,this.handlerType=r,this.level=o,this.contextManager=el(t),this.contextManager.setContext(i),n&&this.contextManager.setContextProperty("logger",{name:n})}return e.prototype.logImplementation=function(e,t,n,r,o){void 0===n&&(n=e2.info);var i,a=ei(t);i=null!=r?eo({error:e6(eM({stackTrace:e_(r)?ev(r):void 0,originalError:r,nonErrorPrefix:"Provided",source:e1.LOGGER,handling:"handled",startClocks:eQ()}),{includeMessage:!0})},a):a,this.handleLogStrategy({message:ei(e),context:i,status:n},this,o)},e.prototype.log=function(e,t,n,r){var o;void 0===n&&(n=e2.info),e5(n,e3.http,this)&&(o=eT()),this.logImplementation(e,t,n,r,o)},e.prototype.setContext=function(e){this.contextManager.setContext(e)},e.prototype.getContext=function(){return this.contextManager.getContext()},e.prototype.setContextProperty=function(e,t){this.contextManager.setContextProperty(e,t)},e.prototype.removeContextProperty=function(e){this.contextManager.removeContextProperty(e)},e.prototype.clearContext=function(){this.contextManager.clearContext()},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},e4([_],e.prototype,"logImplementation",null),e}();function te(e){return function(t,n,r){var o;e5(e,e3.http,this)&&(o=eT()),this.logImplementation(t,n,e,r,o)}}function tt(){var e=V().DatadogEventBridge;if(e)return{getCapabilities:function(){var t;return JSON.parse((null===(t=e.getCapabilities)||void 0===t?void 0:t.call(e))||"[]")},getPrivacyLevel:function(){var t;return null===(t=e.getPrivacyLevel)||void 0===t?void 0:t.call(e)},getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n,r){e.send(JSON.stringify({eventType:t,event:n,view:r?{id:r}:void 0}))}}}function tn(e){void 0===e&&(e=null===(t=V().location)||void 0===t?void 0:t.hostname);var t,n=tt();return!!n&&n.getAllowedWebViewHosts().some(function(t){var n,r;return e===t||(n=e,r=".".concat(t),n.slice(-r.length)===r)})}function tr(e,t,n,r){var o=(void 0===r?{}:r).computeHandlingStack,i=e[t];if("function"!=typeof i){if(!(t in e&&Q(t,"on")))return{stop:J};i=J}var a=!1,c=function(){if(a)return i.apply(this,arguments);var e,t=j(arguments);N(n,null,[{target:this,parameters:t,onPostCall:function(t){e=t},handlingStack:o?eT():void 0}]);var r=i.apply(this,t);return e&&N(e,null,[r]),r};return e[t]=c,{stop:function(){a=!0,e[t]===c&&(e[t]=i)}}}function to(e){return function(e,t){var n=function(){if(void 0===d)try{var e=new ti("http://test/path");d="http://test/path"===e.href}catch(e){d=!1}return d?ti:void 0}();if(n)try{return void 0!==t?new n(e,t):new n(e)}catch(n){throw Error("Failed to construct URL: ".concat(String(n)," ").concat(K({url:e,base:t})))}if(void 0===t&&!/:/.test(e))throw Error("Invalid URL: '".concat(e,"'"));var r=document,o=r.createElement("a");if(void 0!==t){var i=(r=document.implementation.createHTMLDocument("")).createElement("base");i.href=t,r.head.appendChild(i),r.body.appendChild(o)}return o.href=e,o}(e,location.href).href}e8.prototype.ok=te(e2.ok),e8.prototype.debug=te(e2.debug),e8.prototype.info=te(e2.info),e8.prototype.notice=te(e2.notice),e8.prototype.warn=te(e2.warn),e8.prototype.error=te(e2.error),e8.prototype.critical=te(e2.critical),e8.prototype.alert=te(e2.alert),e8.prototype.emerg=te(e2.emerg);var ti=URL;function ta(){return f||(f=new eu(function(e){if(window.fetch)return tr(window,"fetch",function(t){var n,r,o,i,a,c,u,s,l;return n=t.parameters,r=t.onPostCall,o=t.handlingStack,i=n[0],void 0===(c=(a=n[1])&&a.method)&&i instanceof Request&&(c=i.method),u=void 0!==c?String(c).toUpperCase():"GET",s=i instanceof Request?i.url:to(String(i)),l={state:"start",init:a,input:i,method:u,startClocks:eQ(),url:s,handlingStack:o},void(e.notify(l),n[0]=l.input,n[1]=l.init,r(function(t){return function(e,t,n){function r(t){n.state="resolve",F(n,t),e.notify(n)}t.then(L(function(e){r({response:e,responseType:e.type,status:e.status,isAborted:!1})}),L(function(e){var t,o;r({status:0,isAborted:(null===(o=null===(t=n.init)||void 0===t?void 0:t.signal)||void 0===o?void 0:o.aborted)||e instanceof DOMException&&e.code===DOMException.ABORT_ERR,error:e})}))}(e,t,l)}))},{computeHandlingStack:!0}).stop})),f}function tc(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,tc)}var tu=/([\w-]+)\s*=\s*([^;]+)/g;function ts(e,t,n,r){void 0===n&&(n=0);var o=new Date;o.setTime(o.getTime()+n);var i="expires=".concat(o.toUTCString()),a=r&&r.crossSite?"none":"strict",c=r&&r.domain?";domain=".concat(r.domain):"",u=r&&r.secure?";secure":"",s=r&&r.partitioned?";partitioned":"";document.cookie="".concat(e,"=").concat(t,";").concat(i,";path=/;samesite=").concat(a).concat(c).concat(u).concat(s)}function tl(e){return function(e,t){for(tu.lastIndex=0;;){var n=tu.exec(e);if(n){if(n[1]===t)return n[2]}else break}}(document.cookie,e)}function td(e){return h||(h=function(e){var t=new Map;for(tu.lastIndex=0;;){var n=tu.exec(e);if(n)t.set(n[1],n[2]);else break}return t}(document.cookie)),h.get(e)}var tf="_dd_s",tp={COOKIE:"cookie",LOCAL_STORAGE:"local-storage"},th=/^([a-zA-Z]+)=([a-z0-9-]+)$/;function tv(e){var t,n={isExpired:"1"};return t=u.ANONYMOUS_USER_TRACKING,eN.has(t)&&((null==e?void 0:e.anonymousId)?n.anonymousId=null==e?void 0:e.anonymousId:n.anonymousId=Math.floor(9007199254740992*Math.random()).toString(36)),n}function tm(e){return void 0!==e.isExpired||!((void 0===e.created||ej()-Number(e.created)<144e5)&&(void 0===e.expire||ej()<Number(e.expire)))}function tg(e){e.expire=String(ej()+9e5)}function tb(e){return Object.keys(e).map(function(t){return[t,e[t]]}).map(function(e){var t=e[0],n=e[1];return"anonymousId"===t?"aid=".concat(n):"".concat(t,"=").concat(n)}).join("&")}function ty(e){var t={};return e&&(-1!==e.indexOf("&")||th.test(e))&&e.split("&").forEach(function(e){var n=th.exec(e);if(null!==n){var r=n[1],o=n[2];"aid"===r?t.anonymousId=o:t[r]=o}}),t}function tw(e){var t,n=((t={}).secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.crossSite=!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.partitioned=!!e.usePartitionedCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===v){for(var e="dd_site_test_".concat(tc()),t=window.location.hostname.split("."),n=t.pop();t.length&&!tl(e);)ts(e,"test",1e3,{domain:n="".concat(t.pop(),".").concat(n)});ts(e,"",0,{domain:n}),v=n}return v}()),t);return!function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_".concat(tc()),n="test";ts(t,n,6e4,e);var r=tl(t)===n;return ts(t,"",0,e),r}catch(e){return C.error(e),!1}}(n)?void 0:{type:tp.COOKIE,cookieOptions:n}}function tE(){return ty(tl(tf))}function tS(){try{var e=tc(),t="".concat("_dd_test_").concat(e);localStorage.setItem(t,e);var n=localStorage.getItem(t);return localStorage.removeItem(t),e===n?{type:tp.LOCAL_STORAGE}:void 0}catch(e){return}}function tk(e){localStorage.setItem(tf,tb(e))}function tC(){return ty(localStorage.getItem(tf))}function tx(e){tk(tv(e))}var tT=[];function tR(e,t,n){void 0===n&&(n=0);var r,o,i=t.isLockEnabled,a=t.persistSession,c=t.expireSession,u=function(e){return a(F({},e,{lock:o}))},s=function(){var e=t.retrieveSession(),n=e.lock;return e.lock&&delete e.lock,{session:e,lock:n}};if(m||(m=e),e!==m){tT.push(e);return}if(i&&n>=100){tA(t);return}var l=s();if(i&&(l.lock||(o=tc(),u(l.session),(l=s()).lock!==o))){tP(e,t,n);return}var d=e.process(l.session);if(i&&(l=s()).lock!==o){tP(e,t,n);return}if(d&&(tm(d)?c(d):(tg(d),i?u(d):a(d))),i&&!(d&&tm(d))){if((l=s()).lock!==o){tP(e,t,n);return}a(l.session),d=l.session}null===(r=e.after)||void 0===r||r.call(e,d||l.session),tA(t)}function tP(e,t,n){$(function(){tR(e,t,n+1)},10)}function tA(e){m=void 0;var t=tT.shift();t&&tR(t,e)}function tM(e,t,n){var r=function(e,t){var n="/api/v2/".concat(t),r=e.proxy;if("string"==typeof r){var o=to(r);return function(e){return"".concat(o,"?ddforward=").concat(encodeURIComponent("".concat(n,"?").concat(e)))}}if("function"==typeof r)return function(e){return r({path:n,parameters:e})};var i=function(e,t){var n=t.site,r=void 0===n?eI:n,o=t.internalAnalyticsSubdomain;if("logs"===e&&t.usePciIntake&&r===eI)return"pci.browser-intake-datadoghq.com";if(o&&r===eI)return"".concat(o,".").concat(eI);if("dd0g-gov.com"===r)return"http-intake.logs.".concat(r);var i=r.split("."),a=i.pop();return"browser-intake-".concat(i.join("-"),".").concat(a)}(t,e);return function(e){return"https://".concat(i).concat(n,"?").concat(e)}}(e,t);return{build:function(o,i){var a,c,u,s,l,d;return r((a=e.clientToken,c=e.internalAnalyticsSubdomain,u=i.retry,s=i.encoding,l=["sdk_version:".concat("5.35.0"),"api:".concat(o)].concat(n),u&&l.push("retry_count:".concat(u.count),"retry_after:".concat(u.lastFailureStatus)),d=["ddsource=browser","ddtags=".concat(encodeURIComponent(l.join(","))),"dd-api-key=".concat(a),"dd-evp-origin-version=".concat(encodeURIComponent("5.35.0")),"dd-evp-origin=browser","dd-request-id=".concat(tc())],s&&d.push("dd-evp-encoding=".concat(s)),"rum"===t&&d.push("batch_time=".concat(ej())),c&&d.reverse(),d.join("&")))},urlPrefix:r(""),trackType:t}}function tO(e,t){var n=200-e.length-1;(t.length>n||function(){try{return RegExp("[\\p{Ll}]","u"),!0}catch(e){return!1}}()&&RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(t))&&C.warn("".concat(e," value doesn't meet tag requirements and will be sanitized. ").concat(R," ").concat(x,"/getting_started/tagging/#defining-tags"));var r=t.replace(/,/g,"_");return"".concat(e,":").concat(r)}function t_(e,t){return null==e||"string"==typeof e||(C.error("".concat(t," must be defined as a string")),!1)}function tL(e,t){return!!(void 0===e||"number"==typeof e&&e>=0&&e<=100)||(C.error("".concat(t," Sample Rate should be a number between 0 and 100")),!1)}var tN={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function tI(e){return F({startClocks:eQ(),source:e1.REPORT,handling:"unhandled"},e)}function tD(e,t,n,r,o){return n?eR({name:e,message:t,stack:[{func:"?",url:n,line:null!=r?r:void 0,column:null!=o?o:void 0}]}):void 0}function tj(e,t,n){var r;if(void 0===e)return[];if(!("all"===e||Array.isArray(e)&&e.every(function(e){return D(t,e)}))){C.error("".concat(n,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));return}return"all"===e?t:(r=new Set,e.forEach(function(e){return r.add(e)}),j(r))}var tU="logs",tQ={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function tF(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||td("datadog-synthetics-injects-rum"))}var tV=1/0,tz=[];function tB(e){return ez(e.sessionSampleRate)?"1":"0"}var tq=!1;function t$(e){var t=window;if(tF()){var n,r,o=i(t.DD_RUM_SYNTHETICS);return o||tq||(tq=!0,eK("Logs sent before RUM is injected by the synthetics worker",{testId:"string"==typeof(n=window._DATADOG_SYNTHETICS_PUBLIC_ID||td("datadog-synthetics-public-id"))?n:void 0,resultId:"string"==typeof(r=window._DATADOG_SYNTHETICS_RESULT_ID||td("datadog-synthetics-result-id"))?r:void 0})),o}return i(t.DD_RUM);function i(t){if(t&&t.getInternalContext)return t.getInternalContext(e)}}var tH={},tW=((g={})[w.log]=e2.info,g[w.debug]=e2.debug,g[w.info]=e2.info,g[w.warn]=e2.warn,g[w.error]=e2.error,g),tG=new WeakMap;function tZ(e){var t=e.target,n=e.parameters,r=n[0],o=n[1];tG.set(t,{state:"open",method:String(r).toUpperCase(),url:to(String(o))})}function tJ(e){var t=e.target,n=tG.get(t);n&&(n.isAborted=!0)}function tK(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}var tY=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach(function(e){return e(t)})},e.prototype.subscribe=function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter(function(e){return t!==e})}}},e}(),tX=((y={})[e2.ok]=w.debug,y[e2.debug]=w.debug,y[e2.info]=w.info,y[e2.notice]=w.info,y[e2.warn]=w.warn,y[e2.error]=w.error,y[e2.critical]=w.error,y[e2.alert]=w.error,y[e2.emerg]=w.error,y);function t0(e){var t=e.encoder,n=e.request,r=e.flushController,o=e.messageBytesLimit,i={},a=r.flushObservable.subscribe(function(e){return function(e){var r,o=U(i).join("\n");i={};var a=(r=e.reason,D(U(tQ),r)),c=a?n.sendOnExit:n.send;if(a&&t.isAsync){var u=t.finishSync();u.outputBytesCount&&c(t1(u));var s=[u.pendingData,o].filter(Boolean).join("\n");s&&c({data:s,bytesCount:B(s)})}else o&&t.write(t.isEmpty?o:"\n".concat(o)),t.finish(function(e){c(t1(e))})}(e)});function c(e,n){var a,c,u=K(e),s=t.estimateEncodedBytesCount(u);if(s>=o){C.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(o,"KB. ").concat(R," ").concat(T,"/#technical-limitations"));return}void 0!==n&&void 0!==i[n]&&(a=i[n],delete i[n],c=t.estimateEncodedBytesCount(a),r.notifyAfterRemoveMessage(c)),r.notifyBeforeAddMessage(s),void 0!==n?(i[n]=u,r.notifyAfterAddMessage()):t.write(t.isEmpty?u:"\n".concat(u),function(e){r.notifyAfterAddMessage(e-s)})}return{flushController:r,add:c,upsert:c,stop:a.unsubscribe}}function t1(e){return{data:"string"==typeof e.output?e.output:new Blob([e.output],{type:"text/plain"}),bytesCount:e.outputBytesCount,encoding:e.encoding}}function t5(e,t,n,r,o){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?t2(e,t,n,{onSuccess:function(){return t7(0,t,n,r,o)},onFailure:function(){t.queuedPayloads.enqueue(e),function e(t,n,r,o){2===t.transportStatus&&$(function(){t2(t.queuedPayloads.first(),t,n,{onSuccess:function(){t.queuedPayloads.dequeue(),t.currentBackoffTime=1e3,t7(1,t,n,r,o)},onFailure:function(){t.currentBackoffTime=Math.min(6e4,2*t.currentBackoffTime),e(t,n,r,o)}})},t.currentBackoffTime)}(t,n,r,o)}}):t.queuedPayloads.enqueue(e)}function t2(e,t,n,r){var o=r.onSuccess,i=r.onFailure;t.bandwidthMonitor.add(e),n(e,function(n){t.bandwidthMonitor.remove(e),"opaque"!==n.type&&(0===n.status&&!navigator.onLine||408===n.status||429===n.status||n.status>=500)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},i()):(t.transportStatus=0,o())})}function t7(e,t,n,r,o){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(o({message:"Reached max ".concat(r," events size queued for upload: ").concat(3,"MiB"),source:e1.AGENT,startClocks:eQ()}),t.queueFullReported=!0);var i=t.queuedPayloads;for(t.queuedPayloads=t6();i.size()>0;)t5(i.dequeue(),t,n,r,o)}function t6(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=3145728}}}var t4=!1;function t3(e,t,n){var r=new XMLHttpRequest;r.open("POST",e,!0),t instanceof Blob&&r.setRequestHeader("Content-Type",t.type),ef({allowUntrustedEvents:!0},r,["loadend"],function(){null==n||n({status:r.status})},{once:!0}),r.send(t)}function t9(e,t,n,r,o,i,a){void 0===a&&(a=t0);var c=s(e,t),u=n&&s(e,n);function s(e,t){var n,c,u,s=t.endpoint,l=t.encoder;return a({encoder:l,request:(n=e.batchBytesLimit,c={transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:t6(),queueFullReported:!1},u=function(e,t){(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}})()&&e.bytesCount<n?fetch(s.build("fetch",e),{method:"POST",body:e.data,keepalive:!0,mode:"cors"}).then(L(function(e){return null==t?void 0:t({status:e.status,type:e.type})}),L(function(){t3(s.build("xhr",e),e.data,t)})):t3(s.build("xhr",e),e.data,t)},{send:function(e){t5(e,c,u,s.trackType,r)},sendOnExit:function(e){(function(e,t,n){if(navigator.sendBeacon&&n.bytesCount<t)try{var r=e.build("beacon",n);if(navigator.sendBeacon(r,n.data))return}catch(e){t4||(t4=!0,eY(e))}t3(e.build("xhr",n),n.data)})(s,n,e)}}),flushController:function(e){var t,n=e.messagesLimit,r=e.bytesLimit,o=e.durationLimit,i=e.pageExitObservable,a=e.sessionExpireObservable,c=i.subscribe(function(e){return f(e.reason)}),u=a.subscribe(function(){return f("session_expire")}),s=new eu(function(){return function(){c.unsubscribe(),u.unsubscribe()}}),l=0,d=0;function f(e){if(0!==d){var t=d,n=l;d=0,l=0,p(),s.notify({reason:e,messagesCount:t,bytesCount:n})}}function p(){H(t),t=void 0}return{flushObservable:s,get messagesCount(){return d},notifyBeforeAddMessage:function(e){l+e>=r&&f("bytes_limit"),d+=1,l+=e,void 0===t&&(t=$(function(){f("duration_limit")},o))},notifyAfterAddMessage:function(e){void 0===e&&(e=0),l+=e,d>=n?f("messages_limit"):l>=r&&f("bytes_limit")},notifyAfterRemoveMessage:function(e){l-=e,0==(d-=1)&&p()}}}({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageExitObservable:o,sessionExpireObservable:i}),messageBytesLimit:e.messageBytesLimit})}return{flushObservable:c.flushController.flushObservable,add:function(e,t){void 0===t&&(t=!0),c.add(e),u&&t&&u.add(n.transformMessage?n.transformMessage(e):e)},upsert:function(e,t){c.upsert(e,t),u&&u.upsert(n.transformMessage?n.transformMessage(e):e,t)},stop:function(){c.stop(),u&&u.stop()}}}function t8(){var e="",t=0;return{isAsync:!1,get isEmpty(){return!e},write:function(n,r){var o=B(n);t+=o,e+=n,r&&r(o)},finish:function(e){e(this.finishSync())},finishSync:function(){var n={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,n},estimateEncodedBytesCount:function(e){return e.length}}}var ne=function(e){var t,n,r,o=function(e){void 0===e&&(e=2);var t=new Map,n=!1;function r(r){if(void 0===r&&(r=0),!n&&0!==e){var o=2===e?3072:16384,i=r;t.forEach(function(e){i+=e.getBytesCount()}),i>o&&(C.warn("Customer data exceeds the recommended ".concat(o/1024,"KiB threshold. ").concat(R," ").concat(T,"/#customer-data-exceeds-the-recommended-threshold-warning")),n=!0)}}return{createDetachedTracker:function(){var e=et(function(){return r(e.getBytesCount())});return e},getOrCreateTracker:function(e){return t.has(e)||t.set(e,et(r)),t.get(e)},setCompressionStatus:function(t){0===e&&(e=t,r())},getCompressionStatus:function(){return e},stop:function(){t.forEach(function(e){return e.stop()}),t.clear()}}}(),i=el(o.getOrCreateTracker(2)),a=el(o.getOrCreateTracker(1)),c={tryToInit:function(e){t||(t=e)},update:function(e){t=e,n.notify()},isGranted:function(){return t===ed.GRANTED},observable:n=new eu};function s(){return{view:{referrer:document.referrer,url:window.location.href},context:i.getContext(),user:a.getContext()}}var l=function(e,t,n){var r,o,i=eq(),a=t.observable.subscribe(c);function c(){if(o&&r&&t.isGranted()){a.unsubscribe();var e=n(r,o);i.drain(e)}}return{init:function(e){if(!e){C.error("Missing configuration");return}if(Array.isArray(n=e.enableExperimentalFeatures)&&function(e){e.forEach(function(e){eN.add(e)})}(n.filter(function(e){return X(u,e)})),tn()&&(e=F({},e,{clientToken:"empty"})),r=e,o){e0("DD_LOGS",e);return}var n,i=function(e){!0===e.usePciIntake&&e.site&&"datadoghq.com"!==e.site&&C.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");var t=function(e){var t,n,r,o,i,a,c,u,s,l,d,f,p;if(!e||!e.clientToken){C.error("Client Token is not configured, we will not send any data.");return}if((!(a=e.site)||"string"!=typeof a||/(datadog|ddog|datad0g|dd0g)/.test(a)||(C.error("Site should be a valid Datadog site. ".concat(R," ").concat(x,"/getting_started/site/.")),0))&&tL(e.sessionSampleRate,"Session")&&tL(e.telemetrySampleRate,"Telemetry")&&tL(e.telemetryConfigurationSampleRate,"Telemetry Configuration")&&tL(e.telemetryUsageSampleRate,"Telemetry Usage")&&t_(e.version,"Version")&&t_(e.env,"Env")&&t_(e.service,"Service")){if(void 0!==e.trackingConsent&&!X(ed,e.trackingConsent)){C.error('Tracking Consent should be either "granted" or "not-granted"');return}return F({beforeSend:e.beforeSend&&P(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:function(e){switch(e.sessionPersistence){case tp.COOKIE:return tw(e);case tp.LOCAL_STORAGE:return tS();case void 0:var t=tw(e);return!t&&e.allowFallbackToLocalStorage&&(t=tS()),t;default:C.error("Invalid session persistence '".concat(String(e.sessionPersistence),"'"))}}(e),sessionSampleRate:null!==(t=e.sessionSampleRate)&&void 0!==t?t:100,telemetrySampleRate:null!==(n=e.telemetrySampleRate)&&void 0!==n?n:20,telemetryConfigurationSampleRate:null!==(r=e.telemetryConfigurationSampleRate)&&void 0!==r?r:5,telemetryUsageSampleRate:null!==(o=e.telemetryUsageSampleRate)&&void 0!==o?o:5,service:e.service||void 0,silentMultipleInit:!!e.silentMultipleInit,allowUntrustedEvents:!!e.allowUntrustedEvents,trackingConsent:null!==(i=e.trackingConsent)&&void 0!==i?i:ed.GRANTED,storeContextsAcrossPages:!!e.storeContextsAcrossPages,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},(c=e.site||eI,u=e.env,s=e.service,l=e.version,d=e.datacenter,f=[],u&&f.push(tO("env",u)),s&&f.push(tO("service",s)),l&&f.push(tO("version",l)),d&&f.push(tO("datacenter",d)),p={logsEndpointBuilder:tM(e,"logs",f),rumEndpointBuilder:tM(e,"rum",f),sessionReplayEndpointBuilder:tM(e,"replay",f)},F({replica:function(e,t){if(e.replica){var n=F({},e,{site:eI,clientToken:e.replica.clientToken}),r={logsEndpointBuilder:tM(n,"logs",t),rumEndpointBuilder:tM(n,"rum",t)};return F({applicationId:e.replica.applicationId},r)}}(e,f),site:c},p)))}}(e),n=tj(e.forwardConsoleLogs,U(w),"Forward Console Logs"),r=tj(e.forwardReports,U(tN),"Forward Reports");if(t&&n&&r)return e.forwardErrorsToLogs&&!D(n,w.error)&&n.push(w.error),F({forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:n,forwardReports:r,requestErrorResponseLengthLimit:32768,sendLogsAfterSessionExpiration:!!e.sendLogsAfterSessionExpiration},t)}(e);i&&(o=i,ta().subscribe(J),t.tryToInit(i.trackingConsent),c())},get initConfiguration(){return r},getInternalContext:J,handleLog:function(t,n,r,o,a){void 0===o&&(o=e()),void 0===a&&(a=ej()),i.add(function(e){return e.handleLog(t,n,r,o,a)})}}}(s,c,function(t,n){t.storeContextsAcrossPages&&(eh(n,i,tU,2),eh(n,a,tU,1));var r=e(t,n,s,c);return l=F({init:function(e){e0("DD_LOGS",e)},initConfiguration:t},r),r}),d={};return Object.defineProperty(r=F({version:"5.35.0",onReady:function(e){e()}},{logger:new e8(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.handleLog.apply(l,e)},o.createDetachedTracker()),init:L(function(e){return l.init(e)}),setTrackingConsent:L(function(e){c.update(e),eJ({type:eH,usage:{feature:"set-tracking-consent",tracking_consent:e}})}),getGlobalContext:L(function(){return i.getContext()}),setGlobalContext:L(function(e){return i.setContext(e)}),setGlobalContextProperty:L(function(e,t){return i.setContextProperty(e,t)}),removeGlobalContextProperty:L(function(e){return i.removeContextProperty(e)}),clearGlobalContext:L(function(){return i.clearContext()}),createLogger:L(function(e,t){return void 0===t&&(t={}),d[e]=new e8(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.handleLog.apply(l,e)},o.createDetachedTracker(),ei(e),t.handler,t.level,ei(t.context)),d[e]}),getLogger:L(function(e){return d[e]}),getInitConfiguration:L(function(){return er(void 0,l.initConfiguration)}),getInternalContext:L(function(e){return l.getInternalContext(e)}),setUser:L(function(e){var t;(t="object"===en(e))||C.error("Unsupported user:",e),t&&a.setContext(eX(e))}),getUser:L(function(){return a.getContext()}),setUserProperty:L(function(e,t){var n,r=eX(((n={})[e]=t,n))[e];a.setContextProperty(e,r)}),removeUserProperty:L(function(e){return a.removeContextProperty(e)}),clearUser:L(function(){return a.clearContext()})}),"_setDebug",{get:function(){return O},enumerable:!1}),r}(function(e,t,n,r){var o=new tY,i=[];o.subscribe(1,function(e){return eV("logs",e)});var a=function(e){o.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,origin:e1.AGENT,status:e2.error}}),eK("Error reported to customer",{"error.message":e.message})},s=new eu(function(e){var n=ef(t,window,["visibilitychange","freeze"],function(t){"visibilitychange"===t.type&&"hidden"===document.visibilityState?e.notify({reason:tQ.HIDDEN}):"freeze"===t.type&&e.notify({reason:tQ.FROZEN})},{capture:!0}).stop,r=ef(t,window,["beforeunload"],function(){e.notify({reason:tQ.UNLOADING})},void 0).stop;return function(){n(),r()}}),l=!t.sessionStoreStrategyType||tn()||tF()?(f="1"===tB(t)?{}:void 0,{findTrackedSession:function(){return f},expireObservable:new eu}):{findTrackedSession:function(e,t){void 0===t&&(t={returnInactive:!1});var n=h.findSession(e,t);return n&&"1"===n.trackingType?{id:n.id}:void 0},expireObservable:(h=function(e,t,n,r){var o,i,a,c,s,l,d,f,h,v,m,g=new eu,b=new eu,y=function(e,t,n){var r,o,i,a,c,s,l=new eu,d=new eu,f=new eu,h=e.type===tp.COOKIE?(a=e.cookieOptions,!function(e){if(!td(tf)){var t=td("_dd"),n=td("_dd_r"),r=td("_dd_l"),o={};t&&(o.id=t),r&&/^[01]$/.test(r)&&(o.logs=r),n&&/^[012]$/.test(n)&&(o.rum=n),ee(o)||(tg(o),e.persistSession(o))}}(c={isLockEnabled:1===(null!=p?p:(void 0===r&&(r=window),i=r.navigator.userAgent,p=r.chrome||/HeadlessChrome/.test(i)?1:(null===(o=r.navigator.vendor)||void 0===o?void 0:o.indexOf("Apple"))===0||/safari/i.test(i)&&!/chrome|android/i.test(i)?2:r.document.documentMode?0:3)),persistSession:function(e){ts(tf,tb(e),9e5,a)},retrieveSession:tE,expireSession:function(e){var t;ts(tf,tb(tv(e)),(t=u.ANONYMOUS_USER_TRACKING,eN.has(t))?31536e6:144e5,a)}}),c):{isLockEnabled:!1,persistSession:tk,retrieveSession:tC,expireSession:tx},v=h.expireSession,m=W(function(){tR({process:function(e){return tm(e)?tv(e):void 0},after:w},h)},1e3);E();var g=Z(function(){tR({process:function(e){if(!ee(e)){var r=w(e);return function(e){if(ee(e))return 0;var r=n(e[t]),o=r.trackingType,i=r.isTracked;e[t]=o,delete e.isExpired,i&&!e.id&&(e.id=tc(),e.created=String(ej()))}(r),r}},after:function(e){ee(e)||S()||(s=e,l.notify()),s=e}},h)},1e3),b=g.throttled,y=g.cancel;function w(e){var n;return tm(e)&&(e=tv(e)),S()&&((n=e,s.id!==n.id||s[t]!==n[t])?(s=tv(s),d.notify()):(f.notify({previousState:s,newState:e}),s=e)),e}function E(){tR({process:function(e){if(ee(e))return tv(e)},after:function(e){s=e}},h)}function S(){return void 0!==s[t]}return{expandOrRenewSession:b,expandSession:function(){tR({process:function(e){return S()?w(e):void 0}},h)},getSession:function(){return s},renewObservable:l,expireObservable:d,sessionStateUpdateObservable:f,restartSession:E,expire:function(){y(),v(s),w(tv(s))},stop:function(){G(m)},updateSessionState:function(e){tR({process:function(t){return F({},t,e)},after:w},h)}}}(e.sessionStoreStrategyType,t,n);tz.push(function(){return y.stop()});var w=(f=(d={expireDelay:144e5}).expireDelay,h=d.maxEntries,v=[],m=W(function(){return function(){for(var e=eU()-f;v.length>0&&v[v.length-1].endTime<e;)v.pop()}()},6e4),{add:function(e,t){var n={value:e,startTime:t,endTime:tV,remove:function(){eB(v,n)},close:function(e){n.endTime=e}};return h&&v.length>=h&&v.pop(),v.unshift(n),n},find:function(e,t){void 0===e&&(e=tV),void 0===t&&(t={returnInactive:!1});for(var n=0,r=v;n<r.length;n++){var o=r[n];if(o.startTime<=e){if(t.returnInactive||e<=o.endTime)return o.value;break}}},closeActive:function(e){var t=v[0];t&&t.endTime===tV&&t.close(e)},findAll:function(e,t){void 0===e&&(e=tV),void 0===t&&(t=0);var n=e+t;return v.filter(function(t){return t.startTime<=n&&e<=t.endTime}).map(function(e){return e.value})},reset:function(){v=[]},stop:function(){G(m)}});function E(){return{id:y.getSession().id,trackingType:y.getSession()[t],isReplayForced:!!y.getSession().forcedReplay,anonymousId:y.getSession().anonymousId}}return tz.push(function(){return w.stop()}),y.renewObservable.subscribe(function(){w.add(E(),eU()),g.notify()}),y.expireObservable.subscribe(function(){b.notify(),w.closeActive(eU())}),y.expandOrRenewSession(),w.add(E(),{relative:0,timeStamp:eF()}.relative),r.observable.subscribe(function(){r.isGranted()?y.expandOrRenewSession():y.expire()}),o=ef(e,window,["click","touchstart","keydown","scroll"],function(){r.isGranted()&&y.expandOrRenewSession()},{capture:!0,passive:!0}).stop,tz.push(o),i=function(){return y.expandSession()},a=function(){"visible"===document.visibilityState&&i()},c=ef(e,document,["visibilitychange"],a,void 0).stop,tz.push(c),s=W(a,6e4),tz.push(function(){G(s)}),l=ef(e,window,["resume"],function(){return y.restartSession()},{capture:!0}).stop,tz.push(l),{findSession:function(e,t){return w.find(e,t)},renewObservable:g,expireObservable:b,sessionStateUpdateObservable:y.sessionStateUpdateObservable,expire:y.expire,updateSessionState:y.updateSessionState}}(t,"logs",function(e){var n;return{trackingType:n="0"===e||"1"===e?e:tB(t),isTracked:"1"===n}},r)).expireObservable},d=function(e,t,n,r,o){var i,a,u,s,l,d,f,p,h,v,m=(i="browser-logs-sdk",s=new eu,l=new Set,d=!D(eG,t.site)&&ez(t.telemetrySampleRate),(a={}).log=d,a[e$]=d&&ez(t.telemetryConfigurationSampleRate),a[eH]=d&&ez(t.telemetryUsageSampleRate),f=a,p={is_local_file:"file:"===window.location.protocol,is_worker:"WorkerGlobalScope"in self},eJ=function(e){var n=K(e);if(f[e.type]&&l.size<t.maxTelemetryEventsPerPage&&!l.has(n)){var r,o,a=eo({type:"telemetry",date:ej(),service:i,version:"5.35.0",source:"browser",_dd:{format_version:2},telemetry:eo(e,{runtime_env:p,connectivity:{status:(o=window.navigator).onLine?"connected":"not_connected",interfaces:o.connection&&o.connection.type?[o.connection.type]:void 0,effective_type:null===(r=o.connection)||void 0===r?void 0:r.effectiveType},sdk_setup:"npm"}),experimental_features:j(eN)},void 0!==u?u():{});s.notify(a),eV("telemetry",a),l.add(n)}},c=eY,{setContextProvider:function(e){u=e},observable:s,enabled:d});m.setContextProvider(function(){var e,t,n,r,i,a;return{application:{id:null===(e=t$())||void 0===e?void 0:e.application_id},session:{id:null===(t=o.findTrackedSession())||void 0===t?void 0:t.id},view:{id:null===(r=null===(n=t$())||void 0===n?void 0:n.view)||void 0===r?void 0:r.id},action:{id:null===(a=null===(i=t$())||void 0===i?void 0:i.user_action)||void 0===a?void 0:a.id}}});var g=[];if(tn()){var b=tt(),y=m.observable.subscribe(function(e){return b.send("internal_telemetry",e)});g.push(function(){return y.unsubscribe()})}else{var w=t9(t,{endpoint:t.rumEndpointBuilder,encoder:t8()},t.replica&&{endpoint:t.replica.rumEndpointBuilder,encoder:t8()},n,r,o.expireObservable);g.push(function(){return w.stop()});var E=m.observable.subscribe(function(e){return w.add(e,"datad0g.com"===t.site)});g.push(function(){return E.unsubscribe()})}return eZ.drain(),h={session_sample_rate:e.sessionSampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:e.telemetryUsageSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_partitioned_cross_site_session_cookie:e.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:!!e.proxy,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,session_persistence:e.sessionPersistence,allow_fallback_to_local_storage:!!e.allowFallbackToLocalStorage,store_contexts_across_pages:!!e.storeContextsAcrossPages,allow_untrusted_events:!!e.allowUntrustedEvents,tracking_consent:e.trackingConsent},v=F({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports,use_pci_intake:e.usePciIntake,send_logs_after_session_expiration:e.sendLogsAfterSessionExpiration},h),eJ({type:e$,configuration:v}),{telemetry:m,stop:function(){g.forEach(function(e){return e()})}}}(e,t,a,s,l).stop;if(i.push(function(){return d()}),function(e,t){function n(n,r){var o,i,a,c,u,s,l,d;function f(e){var o={isAborted:r.isAborted,handlingStack:r.handlingStack};t.notify(0,{rawLogsEvent:{message:"".concat("xhr"===n?"XHR":"Fetch"," error ").concat(r.method," ").concat(r.url),date:r.startClocks.timeStamp,error:{stack:e||"Failed to load",handling:void 0},http:{method:r.method,status_code:r.status,url:r.url},status:e2.error,origin:e1.NETWORK},domainContext:o})}o=r.url,!eD.every(function(e){return D(o,e)})&&(0===r.status&&"opaque"!==r.responseType||r.status>=500)&&("xhr"in r?f("string"==typeof(i=r.xhr).response?tK(i.response,e):i.response):r.response?(a=r.response,c=f,(u=function(e){try{return e.clone()}catch(e){return}}(a))&&u.body?window.TextDecoder?(s=u.body,l=e.requestErrorResponseLengthLimit,d=function(e,t){e?c("Unable to retrieve response: ".concat(e)):c(t)},function(e,t,n){var r=e.getReader(),o=[],i=0;function a(){if(r.cancel().catch(J),n.collectStreamBody){if(1===o.length)c=o[0];else{c=new Uint8Array(i);var e,a,c,u=0;o.forEach(function(e){c.set(e,u),u+=e.length})}e=c.slice(0,n.bytesLimit),a=c.length>n.bytesLimit}t(void 0,e,a)}(function e(){r.read().then(L(function(t){if(t.done){a();return}n.collectStreamBody&&o.push(t.value),(i+=t.value.length)>n.bytesLimit?a():e()}),L(function(e){return t(e)}))})()}(s,function(e,t,n){if(e)d(e);else{var r=new TextDecoder().decode(t);n&&(r+="..."),d(void 0,r)}},{bytesLimit:l,collectStreamBody:!0})):u.text().then(L(function(t){return c(tK(t,e))}),L(function(e){return c("Unable to retrieve response: ".concat(e))})):c()):r.error&&f(tK(eR(ev(r.error)),e)))}e.forwardErrorsToLogs&&((b||(b=new eu(function(t){var n=tr(XMLHttpRequest.prototype,"open",tZ).stop,r=tr(XMLHttpRequest.prototype,"send",function(n){(function(e,t,n){var r=e.target,o=e.handlingStack,i=tG.get(r);if(i){i.state="start",i.startClocks=eQ(),i.isAborted=!1,i.xhr=r,i.handlingStack=o;var a=!1,c=tr(r,"onreadystatechange",function(){r.readyState===XMLHttpRequest.DONE&&u()}).stop,u=function(){var e;s(),c(),a||(a=!0,i.state="complete",i.duration=(e=i.startClocks.timeStamp,ej()-e),i.status=r.status,n.notify(F({},i)))},s=ef(t,r,["loadend"],u,void 0).stop;n.notify(i)}})(n,e,t)},{computeHandlingStack:!0}).stop,o=tr(XMLHttpRequest.prototype,"abort",tJ).stop;return function(){n(),r(),o()}})),b).subscribe(function(e){"complete"===e.state&&n("xhr",e)}),ta().subscribe(function(e){"resolve"===e.state&&n("fetch",e)}))}(t,o),function(e,t){if(e.forwardErrorsToLogs){var n,r,o,i,a=new eu;(o=(n=r=function(e,t){var n=eM({stackTrace:e,originalError:t,startClocks:eQ(),nonErrorPrefix:"Uncaught",source:e1.SOURCE,handling:"unhandled"});a.notify(n)},tr(window,"onerror",function(e){var t,r,o,i,a,c=e.parameters,u=c[0],s=c[1],l=c[2],d=c[3],f=c[4];n(a=e_(f)?ev(f):{name:("[object String]"===({}).toString.call(u)&&(r=(t=ex.exec(u))[1],o=t[2]),i={name:r,message:o}).name,message:i.message,stack:[{url:s,column:d,line:l}]},null!=f?f:u)})).stop,i=tr(window,"onunhandledrejection",function(e){var t=e.parameters[0].reason||"Empty reason";r(ev(t),t)}).stop,{stop:function(){o(),i()}}).stop,a.subscribe(function(e){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:e6(e),origin:e1.SOURCE,status:e2.error}})})}}(t,o),function(e,t){var n;(n=e.forwardConsoleLogs.map(function(e){return tH[e]||(tH[e]=new eu(function(t){var n=E[e];return E[e]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n.apply(console,r);var i=eT();N(function(){t.notify(function(e,t,n){var r,o=e.map(function(e){return"string"==typeof e?ei(e):e_(e)?eP(ev(e)):K(ei(e),void 0,2)}).join(" ");if(t===w.error){var i=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(t(r,n))return r}}(e,e_);r={stack:i?eR(ev(i)):void 0,fingerprint:eO(i),causes:i?eL(i,"console"):void 0,startClocks:eQ(),message:o,source:e1.CONSOLE,handling:"handled",handlingStack:n}}return{api:t,message:o,error:r,handlingStack:n}}(r,e,i))})},function(){E[e]=n}})),tH[e]}),es.apply(void 0,n)).subscribe(function(e){var n={rawLogsEvent:{date:ej(),message:e.message,origin:e1.CONSOLE,error:e.error&&e6(e.error),status:tW[e.api]},domainContext:{handlingStack:e.handlingStack}};t.notify(0,n)})}(t,o),(v=t.forwardReports,m=[],D(v,tN.cspViolation)&&m.push(new eu(function(e){return ef(t,document,["securitypolicyviolation"],function(t){var n,r,o,i,a;e.notify((n=t,a="'".concat(n.blockedURI,"' blocked by '").concat(n.effectiveDirective,"' directive"),tI({type:n.effectiveDirective,message:"".concat(tN.cspViolation,": ").concat(a),originalError:n,csp:{disposition:n.disposition},stack:tD(n.effectiveDirective,n.originalPolicy?"".concat(a,' of the policy "').concat((i=(o=(r=n.originalPolicy).charCodeAt(99))>=55296&&o<=56319?101:100,r.length<=i?r:"".concat(r.slice(0,i)).concat("...")),'"'):"no policy",n.sourceFile,n.lineNumber,n.columnNumber)})))},void 0).stop})),(g=v.filter(function(e){return e!==tN.cspViolation})).length&&m.push(new eu(function(e){if(window.ReportingObserver){var t=L(function(t,n){return t.forEach(function(t){var n,r;return e.notify((n=t.type,tI({type:(r=t.body).id,message:"".concat(n,": ").concat(r.message),originalError:t,stack:tD(r.id,r.message,r.sourceFile,r.lineNumber,r.columnNumber)})))})}),n=new window.ReportingObserver(t,{types:g,buffered:!0});return n.observe(),function(){n.disconnect()}}})),es.apply(void 0,m)).subscribe(function(e){var t,n,r,i=e.message,a="deprecation"===e.originalError.type?e2.warn:e2.error;a===e2.error?r=e6(e):e.stack&&(i+=" Found in ".concat((t=e.stack,null===(n=/@ (.+)/.exec(t))||void 0===n?void 0:n[1]))),o.notify(0,{rawLogsEvent:{date:ej(),message:i,origin:e1.REPORT,error:r,status:a}})}),y=e9.concat(["custom"]),k={},y.forEach(function(e){var n,r,o;k[e]=(n=t.eventRateLimiterThreshold,r=0,o=!1,{isLimitReached:function(){if(0===r&&$(function(){r=0},6e4),(r+=1)<=n||o)return o=!1,!1;if(r===n+1){o=!0;try{a({message:"Reached max number of ".concat(e,"s by minute: ").concat(n),source:e1.AGENT,startClocks:eQ()})}finally{o=!1}}return!0}})}),o.subscribe(0,function(e){var r,i,a=e.rawLogsEvent,c=e.messageContext,u=e.savedCommonContext,s=e.domainContext,d=a.date-eF(),f=l.findTrackedSession(d);if(f||t.sendLogsAfterSessionExpiration&&l.findTrackedSession(d,{returnInactive:!0})){var p=(void 0===u?void 0:u)||n(),h=eo({service:t.service,session_id:f?f.id:void 0,session:f?{id:f.id}:void 0,usr:ee(p.user)?void 0:p.user,view:p.view},p.context,t$(d),a,void 0===c?void 0:c);(null===(r=t.beforeSend)||void 0===r?void 0:r.call(t,h,s))===!1||h.origin!==e1.AGENT&&(null!==(i=k[h.status])&&void 0!==i?i:k.custom).isLimitReached()||o.notify(1,h)}}),tn())!function(e){var t=tt();e.subscribe(1,function(e){t.send("log",e)})}(o);else{var f,h,v,m,g,y,k,C,x=(C=t9(t,{endpoint:t.logsEndpointBuilder,encoder:t8()},t.replica&&{endpoint:t.replica.logsEndpointBuilder,encoder:t8()},a,s,l.expireObservable),o.subscribe(1,function(e){C.add(e)}),C).stop;i.push(function(){return x()})}return{handleLog:function(e,t,n,r,i){var a,c,u=eo(t.getContext(),e.context);if(e5(e.status,e3.console,t)&&(a=e.status,c=e.message,S[tX[a]].call(E,c,u)),e5(e.status,e3.http,t)){var s={rawLogsEvent:{date:i||ej(),message:e.message,status:e.status,origin:e1.LOGGER},messageContext:u,savedCommonContext:r};n&&(s.domainContext={handlingStack:n}),o.notify(0,s)}},getInternalContext:function(e){var t=l.findTrackedSession(e);if(t)return{session_id:t.id}},stop:function(){i.forEach(function(e){return e()})}}});(a=(o=V())[i="DD_LOGS"])&&!a.q&&a.version&&C.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),o[i]=ne,a&&a.q&&a.q.forEach(function(e){return P(e,"onReady callback threw an error:")()})},2780:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(419)},419:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u=[],s=!1,l=-1;function d(){s&&r&&(s=!1,r.length?u=r.concat(u):l=-1,u.length&&f())}function f(){if(!s){var e=c(d);s=!0;for(var t=u.length;t;){for(r=u,u=[];++l<t;)r&&r[l].run();l=-1,t=u.length}r=null,s=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||s||c(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}},a=!0;try{t[e](i,i.exports,r),a=!1}finally{a&&delete n[e]}return i.exports}r.ab="//";var o=r(229);e.exports=o}()},1358:function(e,t,n){"use strict";n.d(t,{Fj:function(){return s}});var r=["Shift","Meta","Alt","Control"],o="object"==typeof navigator?navigator.platform:"",i=/Mac|iPod|iPhone|iPad/.test(o),a=i?"Meta":"Control",c="Win32"===o?["Control","Alt"]:i?["Alt"]:[];function u(e,t){return"function"==typeof e.getModifierState&&(e.getModifierState(t)||c.includes(t)&&e.getModifierState("AltGraph"))}function s(e,t,n){var o,i,c,s,l,d=void 0===n?{}:n,f=d.event,p=void 0===f?"keydown":f,h=d.capture,v=(i=null!=(o=({timeout:d.timeout}).timeout)?o:1e3,c=Object.keys(t).map(function(e){return[e.trim().split(" ").map(function(e){var t=e.split(/\b\+/),n=t.pop(),r=n.match(/^\((.+)\)$/);return r&&(n=RegExp("^"+r[1]+"$")),[t=t.map(function(e){return"$mod"===e?a:e}),n]}),t[e]]}),s=new Map,l=null,function(e){e instanceof KeyboardEvent&&(c.forEach(function(t){var n,o,i,a=t[0],c=t[1],l=s.get(a)||a;(o=(n=l[0])[0],((i=n[1])instanceof RegExp?!i.test(e.key)&&!i.test(e.code):i.toUpperCase()!==e.key.toUpperCase()&&i!==e.code)||o.find(function(t){return!u(e,t)})||r.find(function(t){return!o.includes(t)&&i!==t&&u(e,t)}))?u(e,e.key)||s.delete(a):l.length>1?s.set(a,l.slice(1)):(s.delete(a),c(e))}),l&&clearTimeout(l),l=setTimeout(s.clear.bind(s),i))});return e.addEventListener(p,v,h),function(){e.removeEventListener(p,v,h)}}},2811:function(e,t,n){"use strict";n.d(t,{C:function(){return u},D:function(){return s},F:function(){return ea},G:function(){return ed},L:function(){return eh},M:function(){return M},P:function(){return ei},R:function(){return ev},S:function(){return f},T:function(){return L},a:function(){return eb},b:function(){return j},c:function(){return p},d:function(){return m},e:function(){return g},f:function(){return O},g:function(){return ep},h:function(){return ec},i:function(){return eg},m:function(){return ey}});var r=n(6397),o=n(2104),i=n(460),a=n(3717),c=n(4553);let u=r.forwardRef(function(e,t){let{mergedProps:n}=(0,o.b)({props:e});return r.createElement("button",{ref:t,...n},e.children)}),s=r.forwardRef(function(e,t){let{buttonProps:n}=(0,o.c)(e);return r.createElement("button",{ref:t,...n},e.children)}),l=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},r.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),r.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),d=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},r.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),f=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),p=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...e},r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),h=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),v=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},r.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),m=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),g=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),b=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),y=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},r.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),r.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),w=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},r.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),r.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),E=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),S=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("g",{opacity:.25},r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),k=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("g",{opacity:.25},r.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),r.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),C=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},r.createElement("g",{opacity:.25},r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),r.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),x=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),T=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},r.createElement("g",{fill:"currentColor"},r.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),r.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),R=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),P=e=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},r.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},r.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),A=r.forwardRef(function({trackRef:e,...t},n){let i=(0,c.a9)(),{mergedProps:a,inFocus:u}=(0,o.d)({trackRef:e??i,props:t});return r.createElement(c.aa.Consumer,null,e=>void 0!==e&&r.createElement("button",{ref:n,...a},t.children?t.children:u?r.createElement(P,null):r.createElement(v,null)))}),M=r.forwardRef(function({kind:e,initialSelection:t,onActiveDeviceChange:n,onDeviceListChange:u,onDeviceSelectError:s,exactMatch:l,track:d,requestPermissions:f,onError:p,...h},v){let m=(0,c.w)(),g=r.useCallback(e=>{m&&m.emit(a.TQ.MediaDevicesError,e),null==p||p(e)},[m,p]),{devices:b,activeDeviceId:y,setActiveMediaDevice:w,className:E}=(0,o.e)({kind:e,room:m,track:d,requestPermissions:f,onError:g});r.useEffect(()=>{void 0!==t&&w(t)},[w]),r.useEffect(()=>{"function"==typeof u&&u(b)},[u,b]),r.useEffect(()=>{y&&""!==y&&(null==n||n(y))},[y]);let S=async e=>{try{await w(e,{exact:l})}catch(e){if(e instanceof Error)null==s||s(e);else throw e}},k=r.useMemo(()=>(0,i.a)(h,{className:E},{className:"lk-list"}),[E,h]),C=!!b.find(e=>e.label.toLowerCase().startsWith("default"));function x(e,t,n){return e===t||!C&&0===n&&"default"===t}return r.createElement("ul",{ref:v,...k},b.map((e,t)=>r.createElement("li",{key:e.deviceId,id:e.deviceId,"data-lk-active":x(e.deviceId,y,t),"aria-selected":x(e.deviceId,y,t),role:"option"},r.createElement("button",{className:"lk-button",onClick:()=>S(e.deviceId)},e.label))))}),O=r.forwardRef(function({label:e,...t},n){let i=(0,c.f)(),{mergedProps:a,canPlayAudio:u}=(0,o.f)({room:i,props:t}),{mergedProps:s,canPlayVideo:l}=(0,o.g)({room:i,props:a}),{style:d,...f}=s;return d.display=u&&l?"none":"block",r.createElement("button",{ref:n,style:d,...f},e??`Start ${u?"Video":"Audio"}`)});function _(e,t){switch(e){case a.fQ.Source.Microphone:return t?r.createElement(w,null):r.createElement(y,null);case a.fQ.Source.Camera:return t?r.createElement(d,null):r.createElement(l,null);case a.fQ.Source.ScreenShare:return t?r.createElement(T,null):r.createElement(x,null);default:return}}let L=r.forwardRef(function({showIcon:e,...t},n){let{buttonProps:i,enabled:a}=(0,o.h)(t),[c,u]=r.useState(!1);return r.useEffect(()=>{u(!0)},[]),c&&r.createElement("button",{ref:n,...i},(e??!0)&&_(t.source,a),t.children)}),N=r.forwardRef(function(e,t){let{className:n,quality:c}=(0,o.i)(e),u=r.useMemo(()=>({...(0,i.a)(e,{className:n}),"data-lk-quality":c}),[c,e,n]);return r.createElement("div",{ref:t,...u},e.children??function(e){switch(e){case a.ZV.Excellent:return r.createElement(E,null);case a.ZV.Good:return r.createElement(S,null);case a.ZV.Poor:return r.createElement(k,null);default:return r.createElement(C,null)}}(c))}),I=r.forwardRef(function({participant:e,...t},n){let a=(0,c.c)(e),{className:u,infoObserver:s}=r.useMemo(()=>(0,c.ab)(a),[a]),{identity:l,name:d}=(0,o.j)(s,{name:a.name,identity:a.identity,metadata:a.metadata}),f=r.useMemo(()=>(0,i.a)(t,{className:u,"data-lk-participant-name":d}),[t,u,d]);return r.createElement("span",{ref:n,...f},""!==d?d:l,t.children)}),D=r.forwardRef(function({trackRef:e,show:t="always",...n},a){let{className:c,isMuted:u}=(0,o.k)(e),s="always"===t||"muted"===t&&u||"unmuted"===t&&!u,l=r.useMemo(()=>(0,i.a)(n,{className:c}),[c,n]);return s?r.createElement("div",{ref:a,...l,"data-lk-muted":u},n.children??_(e.source,!u)):null}),j=e=>r.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},r.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),r.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function U(e,t={}){let[n,o]=r.useState((0,c.X)(e)),[a,u]=r.useState(null==n?void 0:n.isMuted),[s,l]=r.useState(null==n?void 0:n.isSubscribed),[d,f]=r.useState(null==n?void 0:n.track),[p,h]=r.useState("landscape"),v=r.useRef(),{className:m,trackObserver:g}=r.useMemo(()=>(0,c.Y)(e),[e.participant.sid??e.participant.identity,e.source,(0,c.a1)(e)&&e.publication.trackSid]);return r.useEffect(()=>{let e=g.subscribe(e=>{c.l.debug("update track",e),o(e),u(null==e?void 0:e.isMuted),l(null==e?void 0:e.isSubscribed),f(null==e?void 0:e.track)});return()=>null==e?void 0:e.unsubscribe()},[g]),r.useEffect(()=>{var n,r;return d&&(v.current&&d.detach(v.current),null!=(n=t.element)&&n.current&&!(e.participant.isLocal&&(null==d?void 0:d.kind)==="audio")&&d.attach(t.element.current)),v.current=null==(r=t.element)?void 0:r.current,()=>{v.current&&(null==d||d.detach(v.current))}},[d,t.element]),r.useEffect(()=>{var e,t;"number"==typeof(null==(e=null==n?void 0:n.dimensions)?void 0:e.width)&&"number"==typeof(null==(t=null==n?void 0:n.dimensions)?void 0:t.height)&&h(n.dimensions.width>n.dimensions.height?"landscape":"portrait")},[n]),{publication:n,isMuted:a,isSubscribed:s,track:d,elementProps:(0,i.a)(t.props,{className:m,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":null==n?void 0:n.source,...(null==n?void 0:n.kind)==="video"&&{"data-lk-orientation":p}})}}var Q=NaN,F=/^\s+|\s+$/g,V=/^[-+]0x[0-9a-f]+$/i,z=/^0b[01]+$/i,B=/^0o[0-7]+$/i,q=parseInt,$="object"==typeof c.ac&&c.ac&&c.ac.Object===Object&&c.ac,H="object"==typeof self&&self&&self.Object===Object&&self,W=$||H||Function("return this")(),G=Object.prototype.toString,Z=Math.max,J=Math.min,K=function(){return W.Date.now()};function Y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function X(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==G.call(t))return Q;if(Y(e)){var t,n="function"==typeof e.valueOf?e.valueOf():e;e=Y(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(F,"");var r=z.test(e);return r||B.test(e)?q(e.slice(2),r?2:8):V.test(e)?Q:+e}let ee=(0,c.ad)(function(e,t,n){var r,o,i,a,c,u,s=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function p(t){var n=r,i=o;return r=o=void 0,s=t,a=e.apply(i,n)}function h(e){var n=e-u,r=e-s;return void 0===u||n>=t||n<0||d&&r>=i}function v(){var e,n,r,o=K();if(h(o))return m(o);c=setTimeout(v,(e=o-u,n=o-s,r=t-e,d?J(r,i-n):r))}function m(e){return c=void 0,f&&r?p(e):(r=o=void 0,a)}function g(){var e,n=K(),i=h(n);if(r=arguments,o=this,u=n,i){if(void 0===c)return s=e=u,c=setTimeout(v,t),l?p(e):a;if(d)return c=setTimeout(v,t),p(u)}return void 0===c&&(c=setTimeout(v,t)),a}return t=X(t)||0,Y(n)&&(l=!!n.leading,i=(d="maxWait"in n)?Z(X(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f),g.cancel=function(){void 0!==c&&clearTimeout(c),s=0,r=u=o=c=void 0},g.flush=function(){return void 0===c?a:m(K())},g}),et=r.forwardRef(function({onTrackClick:e,onClick:t,onSubscriptionStatusChanged:n,trackRef:o,manageSubscription:i,...u},s){let l=(0,c.i)(o),d=r.useRef(null);r.useImperativeHandle(s,()=>d.current);let f=function({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:o=!1,initialIsIntersecting:i=!1,onChange:a}={}){var c;let[u,s]=(0,r.useState)(null),[l,d]=(0,r.useState)(()=>({isIntersecting:i,entry:void 0})),f=(0,r.useRef)();f.current=a;let p=(null==(c=l.entry)?void 0:c.isIntersecting)&&o;(0,r.useEffect)(()=>{let r;if(!u||!("IntersectionObserver"in window)||p)return;let i=new IntersectionObserver(e=>{let t=Array.isArray(i.thresholds)?i.thresholds:[i.thresholds];e.forEach(e=>{let n=e.isIntersecting&&t.some(t=>e.intersectionRatio>=t);d({isIntersecting:n,entry:e}),f.current&&f.current(n,e),n&&o&&r&&(r(),r=void 0)})},{threshold:e,root:t,rootMargin:n});return i.observe(u),()=>{i.disconnect()}},[u,JSON.stringify(e),t,n,p,o]);let h=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;u||null==(e=l.entry)||!e.target||o||p||h.current===l.entry.target||(h.current=l.entry.target,d({isIntersecting:i,entry:void 0}))},[u,l.entry,o,p,i]);let v=[s,!!l.isIntersecting,l.entry];return v.ref=v[0],v.isIntersecting=v[1],v.entry=v[2],v}({root:d.current}),[p]=function(e,t,n){let o=e instanceof Function?e():e,[i,a]=(0,r.useState)(o),c=(0,r.useRef)(o),u=function(e,t=500,n){let o=(0,r.useRef)();!function(e){let t=(0,r.useRef)(e);t.current=e,(0,r.useEffect)(()=>()=>{t.current()},[])}(()=>{o.current&&o.current.cancel()});let i=(0,r.useMemo)(()=>{let r=ee(e,t,n),i=(...e)=>r(...e);return i.cancel=()=>{r.cancel()},i.isPending=()=>!!o.current,i.flush=()=>r.flush(),i},[e,t,n]);return(0,r.useEffect)(()=>{o.current=ee(e,t,n)},[e,t,n]),i}(a,3e3,void 0);return c.current===o||(u(o),c.current=o),[i,u]}(f,0);r.useEffect(()=>{i&&l.publication instanceof a.E8&&(null==p?void 0:p.isIntersecting)===!1&&(null==f?void 0:f.isIntersecting)===!1&&l.publication.setSubscribed(!1)},[p,l,i]),r.useEffect(()=>{i&&l.publication instanceof a.E8&&(null==f?void 0:f.isIntersecting)===!0&&l.publication.setSubscribed(!0)},[f,l,i]);let{elementProps:h,publication:v,isSubscribed:m}=U(l,{element:d,props:u});return r.useEffect(()=>{null==n||n(!!m)},[m,n]),r.createElement("video",{ref:d,...h,muted:!0,onClick:n=>{null==t||t(n),null==e||e({participant:null==l?void 0:l.participant,track:v})}})}),en=r.forwardRef(function({trackRef:e,onSubscriptionStatusChanged:t,volume:n,...o},i){let u=(0,c.i)(e),s=r.useRef(null);r.useImperativeHandle(i,()=>s.current);let{elementProps:l,isSubscribed:d,track:f,publication:p}=U(u,{element:s,props:o});return r.useEffect(()=>{null==t||t(!!d)},[d,t]),r.useEffect(()=>{void 0===f||void 0===n||(f instanceof a.rl?f.setVolume(n):c.l.warn("Volume can only be set on remote audio tracks."))},[n,f]),r.useEffect(()=>{void 0===p||void 0===o.muted||(p instanceof a.E8?p.setEnabled(!o.muted):c.l.warn("Can only call setEnabled on remote track publications."))},[o.muted,p,f]),r.createElement("audio",{ref:s,...l})});function er(e){let t=!!(0,c.B)();return e.participant&&!t?r.createElement(c.ae.Provider,{value:e.participant},e.children):r.createElement(r.Fragment,null,e.children)}function eo(e){let t=!!(0,c.a9)();return e.trackRef&&!t?r.createElement(c.af.Provider,{value:e.trackRef},e.children):r.createElement(r.Fragment,null,e.children)}let ei=r.forwardRef(function({trackRef:e,children:t,onParticipantClick:n,disableSpeakingIndicator:i,...u},s){var l,d;let f=(0,c.i)(e),{elementProps:p}=(0,o.l)({htmlProps:u,disableSpeakingIndicator:i,onParticipantClick:n,trackRef:f}),h=(0,o.m)(f.participant),v=(0,c.j)(),m=null==(l=(0,c.ag)())?void 0:l.autoSubscription,g=r.useCallback(e=>{f.source&&!e&&v&&v.pin.dispatch&&(0,c.m)(f,v.pin.state)&&v.pin.dispatch({msg:"clear_pin"})},[f,v]);return r.createElement("div",{ref:s,style:{position:"relative"},...p},r.createElement(eo,{trackRef:f},r.createElement(er,{participant:f.participant},t??r.createElement(r.Fragment,null,(0,c.a1)(f)&&((null==(d=f.publication)?void 0:d.kind)==="video"||f.source===a.fQ.Source.Camera||f.source===a.fQ.Source.ScreenShare)?r.createElement(et,{trackRef:f,onSubscriptionStatusChanged:g,manageSubscription:m}):(0,c.a1)(f)&&r.createElement(en,{trackRef:f,onSubscriptionStatusChanged:g}),r.createElement("div",{className:"lk-participant-placeholder"},r.createElement(j,null)),r.createElement("div",{className:"lk-participant-metadata"},r.createElement("div",{className:"lk-participant-metadata-item"},f.source===a.fQ.Source.Camera?r.createElement(r.Fragment,null,h&&r.createElement(b,{style:{marginRight:"0.25rem"}}),r.createElement(D,{trackRef:{participant:f.participant,source:a.fQ.Source.Microphone},show:"muted"}),r.createElement(I,null)):r.createElement(r.Fragment,null,r.createElement(x,{style:{marginRight:"0.25rem"}}),r.createElement(I,null,"'s screen"))),r.createElement(N,{className:"lk-participant-metadata-item"}))),r.createElement(A,{trackRef:f}))))});function ea(e){let t=(0,i.a)(e,{className:"lk-focus-layout"});return r.createElement("div",{...t},e.children)}function ec({trackRef:e,...t}){return r.createElement(ei,{trackRef:e,...t})}function eu({tracks:e,...t}){return r.createElement(r.Fragment,null,e.map(e=>r.createElement(c.af.Provider,{value:e,key:(0,c.p)(e)},(0,i.c)(t.children))))}function es({totalPageCount:e,nextPage:t,prevPage:n,currentPage:o,pagesContainer:i}){let[a,u]=r.useState(!1);return r.useEffect(()=>{let e;return i&&(e=(0,c.ah)(i.current,2e3).subscribe(u)),()=>{e&&e.unsubscribe()}},[i]),r.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":a},r.createElement("button",{className:"lk-button",onClick:n},r.createElement(h,null)),r.createElement("span",{className:"lk-pagination-count"},`${o} of ${e}`),r.createElement("button",{className:"lk-button",onClick:t},r.createElement(h,null)))}let el=r.forwardRef(function({totalPageCount:e,currentPage:t},n){let o=Array(e).fill("").map((e,n)=>n+1===t?r.createElement("span",{"data-lk-active":!0,key:n}):r.createElement("span",{key:n}));return r.createElement("div",{ref:n,className:"lk-pagination-indicator"},o)});function ed({tracks:e,...t}){let n=r.createRef(),a=r.useMemo(()=>(0,i.a)(t,{className:"lk-grid-layout"}),[t]),{layout:c}=(0,o.n)(n,e.length),u=(0,o.o)(c.maxTiles,e);return(0,o.p)(n,{onLeftSwipe:u.nextPage,onRightSwipe:u.prevPage}),r.createElement("div",{ref:n,"data-lk-pagination":u.totalPageCount>1,...a},r.createElement(eu,{tracks:u.tracks},t.children),e.length>c.maxTiles&&r.createElement(r.Fragment,null,r.createElement(el,{totalPageCount:u.totalPageCount,currentPage:u.currentPage}),r.createElement(es,{pagesContainer:n,...u})))}let ef=-(-.6000000000000001*1);function ep({tracks:e,orientation:t,...n}){let i=r.useRef(null),[a,u]=r.useState(0),{width:s,height:l}=(0,o.q)(i),d=t||(l>=s?"vertical":"horizontal"),f="vertical"===d?Math.max(s*ef,130):Math.max(1.6*l,140),p=(0,c.ai)(),h=Math.max("vertical"===d?(l-p)/f:(s-p)/f,1),v=Math.round(h);.5>Math.abs(h-a)?v=Math.round(a):a!==h&&u(h);let m=(0,o.r)(e,v);return r.useLayoutEffect(()=>{i.current&&(i.current.dataset.lkOrientation=d,i.current.style.setProperty("--lk-max-visible-tiles",v.toString()))},[v,d]),r.createElement("aside",{key:d,className:"lk-carousel",ref:i,...n},r.createElement(eu,{tracks:m},n.children))}function eh({value:e,onPinChange:t,onWidgetChange:n,children:o}){let i=(0,c.aj)(e);return r.useEffect(()=>{c.l.debug("PinState Updated",{state:i.pin.state}),t&&i.pin.state&&t(i.pin.state)},[i.pin.state,t]),r.useEffect(()=>{c.l.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),r.createElement(c.aa.Provider,{value:i},o)}function ev({volume:e,muted:t}){let n=(0,o.t)([a.fQ.Source.Microphone,a.fQ.Source.ScreenShareAudio,a.fQ.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(e=>!e.participant.isLocal&&e.publication.kind===a.fQ.Kind.Audio);return r.createElement("div",{style:{display:"none"}},n.map(n=>r.createElement(en,{key:(0,c.p)(n),trackRef:n,volume:e,muted:t})))}function em(e){let t=r.useMemo(()=>(0,i.a)(e,{className:"lk-toast"}),[e]);return r.createElement("div",{...t},e.children)}function eg(e){let[t,n]=r.useState(void 0),i=(0,o.a)(e.room);return r.useEffect(()=>{switch(i){case a.em.Reconnecting:n(r.createElement(r.Fragment,null,r.createElement(R,{className:"lk-spinner"})," Reconnecting"));break;case a.em.Connecting:n(r.createElement(r.Fragment,null,r.createElement(R,{className:"lk-spinner"})," Connecting"));break;case a.em.Disconnected:n(r.createElement(r.Fragment,null,"Disconnected"));break;default:n(void 0)}},[i]),t?r.createElement(em,{className:"lk-toast-connection-state"},t):r.createElement(r.Fragment,null)}let eb=r.forwardRef(function({entry:e,hideName:t=!1,hideTimestamp:n=!1,messageFormatter:o,...i},a){var c,u,s;let l=r.useMemo(()=>o?o(e.message):e.message,[e.message,o]),d=!!e.editTimestamp,f=new Date(e.timestamp),p=navigator?navigator.language:"en-US";return r.createElement("li",{ref:a,className:"lk-chat-entry",title:f.toLocaleTimeString(p,{timeStyle:"full"}),"data-lk-message-origin":null!=(c=e.from)&&c.isLocal?"local":"remote",...i},(!n||!t||d)&&r.createElement("span",{className:"lk-meta-data"},!t&&r.createElement("strong",{className:"lk-participant-name"},(null==(u=e.from)?void 0:u.name)??(null==(s=e.from)?void 0:s.identity)),(!n||d)&&r.createElement("span",{className:"lk-timestamp"},d&&"edited ",f.toLocaleTimeString(p,{timeStyle:"short"}))),r.createElement("span",{className:"lk-message-body"},l))});function ey(e){return(0,c.ak)(e,(0,c.al)()).map((e,t)=>{if("string"==typeof e)return e;{let n=e.content.toString(),o="url"===e.type?/^http(s?):\/\//.test(n)?n:`https://${n}`:`mailto:${n}`;return r.createElement("a",{className:"lk-chat-link",key:t,href:o,target:"_blank",rel:"noreferrer"},n)}})}},4553:function(e,t,n){"use strict";n.d(t,{$:function(){return nI},A:function(){return t0},B:function(){return nZ},D:function(){return nv},F:function(){return nV},G:function(){return tV},L:function(){return n1},N:function(){return nC},O:function(){return nx},P:function(){return nT},Q:function(){return np},R:function(){return nK},S:function(){return nu},T:function(){return ns},U:function(){return t$},V:function(){return nM},W:function(){return tH},X:function(){return t2},Y:function(){return t5},Z:function(){return nk},_:function(){return nD},a:function(){return nF},a0:function(){return ne},a1:function(){return tR},a8:function(){return nt},a9:function(){return nH},aa:function(){return nQ},ab:function(){return nh},ac:function(){return er},ad:function(){return eo},ae:function(){return nG},af:function(){return n$},ag:function(){return n5},ah:function(){return nO},ai:function(){return t_},aj:function(){return nB},ak:function(){return tU},al:function(){return tj},am:function(){return tI},an:function(){return tD},ao:function(){return tz},ap:function(){return nz},aq:function(){return tM},ar:function(){return tL},c:function(){return nJ},d:function(){return nf},e:function(){return t4},f:function(){return nY},h:function(){return nd},i:function(){return nW},j:function(){return nq},k:function(){return nR},l:function(){return tF},m:function(){return tO},n:function(){return function e(t,n,r,o){if(t.length<1)throw Error("At least one grid layout definition must be provided.");let i=[...t].map(e=>{var t,n;return{name:`${e.columns}x${e.rows}`,columns:e.columns,rows:e.rows,maxTiles:e.columns*e.rows,minWidth:null!=(t=e.minWidth)?t:0,minHeight:null!=(n=e.minHeight)?n:0,orientation:e.orientation}}).sort((e,t)=>e.maxTiles!==t.maxTiles?e.maxTiles-t.maxTiles:0!==e.minWidth||0!==t.minWidth?e.minWidth-t.minWidth:0!==e.minHeight||0!==t.minHeight?e.minHeight-t.minHeight:0);if(r<=0||o<=0)return i[0];let a=0,c=r/o>1?"landscape":"portrait",u=i.find((e,t,r)=>{a=t;let o=-1!==r.findIndex((n,r)=>{let o=!n.orientation||n.orientation===c,i=n.maxTiles===e.maxTiles;return r>t&&i&&o});return e.maxTiles>=n&&!o});if(void 0===u){if(u=i[i.length-1])tF.warn(`No layout found for: participantCount: ${n}, width/height: ${r}/${o} fallback to biggest available layout (${u}).`);else throw Error("No layout or fallback layout found.")}if((r<u.minWidth||o<u.minHeight)&&a>0){let t=i[a-1];u=e(i.slice(0,a),t.maxTiles,r,o)}return u}},o:function(){return ni},p:function(){return tA},q:function(){return na},s:function(){return nP},t:function(){return nr},u:function(){return n0},v:function(){return nc},w:function(){return nX},x:function(){return t3},y:function(){return nl},z:function(){return tG}});var r,o,i=n(3717),a=n(6397);let c=Math.min,u=Math.max,s=Math.round,l=e=>({x:e,y:e}),d={left:"right",right:"left",bottom:"top",top:"bottom"},f={start:"end",end:"start"};function p(e,t){return"function"==typeof e?e(t):e}function h(e){return e.split("-")[0]}function v(e){return e.split("-")[1]}function m(e){return"x"===e?"y":"x"}function g(e){return"y"===e?"height":"width"}function b(e){return["top","bottom"].includes(h(e))?"y":"x"}function y(e){return e.replace(/start|end/g,e=>f[e])}function w(e){return e.replace(/left|right|bottom|top/g,e=>d[e])}function E(e){let{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function S(e,t,n){let r,{reference:o,floating:i}=e,a=b(t),c=m(b(t)),u=g(c),s=h(t),l="y"===a,d=o.x+o.width/2-i.width/2,f=o.y+o.height/2-i.height/2,p=o[u]/2-i[u]/2;switch(s){case"top":r={x:d,y:o.y-i.height};break;case"bottom":r={x:d,y:o.y+o.height};break;case"right":r={x:o.x+o.width,y:f};break;case"left":r={x:o.x-i.width,y:f};break;default:r={x:o.x,y:o.y}}switch(v(t)){case"start":r[c]-=p*(n&&l?-1:1);break;case"end":r[c]+=p*(n&&l?-1:1)}return r}let k=async(e,t,n)=>{let{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,c=i.filter(Boolean),u=await (null==a.isRTL?void 0:a.isRTL(t)),s=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:l,y:d}=S(s,r,u),f=r,p={},h=0;for(let n=0;n<c.length;n++){let{name:i,fn:v}=c[n],{x:m,y:g,data:b,reset:y}=await v({x:l,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:p,rects:s,platform:a,elements:{reference:e,floating:t}});l=m??l,d=g??d,p={...p,[i]:{...p[i],...b}},y&&h<=50&&(h++,"object"==typeof y&&(y.placement&&(f=y.placement),y.rects&&(s=!0===y.rects?await a.getElementRects({reference:e,floating:t,strategy:o}):y.rects),{x:l,y:d}=S(s,f,u)),n=-1)}return{x:l,y:d,placement:f,strategy:o,middlewareData:p}};async function C(e,t){var n;void 0===t&&(t={});let{x:r,y:o,platform:i,rects:a,elements:c,strategy:u}=e,{boundary:s="clippingAncestors",rootBoundary:l="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=p(t,e),v="number"!=typeof h?{top:0,right:0,bottom:0,left:0,...h}:{top:h,right:h,bottom:h,left:h},m=c[f?"floating"===d?"reference":"floating":d],g=E(await i.getClippingRect({element:null==(n=await (null==i.isElement?void 0:i.isElement(m)))||n?m:m.contextElement||await (null==i.getDocumentElement?void 0:i.getDocumentElement(c.floating)),boundary:s,rootBoundary:l,strategy:u})),b="floating"===d?{...a.floating,x:r,y:o}:a.reference,y=await (null==i.getOffsetParent?void 0:i.getOffsetParent(c.floating)),w=await (null==i.isElement?void 0:i.isElement(y))&&await (null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},S=E(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:y,strategy:u}):b);return{top:(g.top-S.top+v.top)/w.y,bottom:(S.bottom-g.bottom+v.bottom)/w.y,left:(g.left-S.left+v.left)/w.x,right:(S.right-g.right+v.right)/w.x}}async function x(e,t){let{placement:n,platform:r,elements:o}=e,i=await (null==r.isRTL?void 0:r.isRTL(o.floating)),a=h(n),c=v(n),u="y"===b(n),s=["left","top"].includes(a)?-1:1,l=i&&u?-1:1,d=p(t,e),{mainAxis:f,crossAxis:m,alignmentAxis:g}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return c&&"number"==typeof g&&(m="end"===c?-1*g:g),u?{x:m*l,y:f*s}:{x:f*s,y:m*l}}function T(){return"u">typeof window}function R(e){return M(e)?(e.nodeName||"").toLowerCase():"#document"}function P(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function A(e){var t;return null==(t=(M(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function M(e){return!!T()&&(e instanceof Node||e instanceof P(e).Node)}function O(e){return!!T()&&(e instanceof Element||e instanceof P(e).Element)}function _(e){return!!T()&&(e instanceof HTMLElement||e instanceof P(e).HTMLElement)}function L(e){return!(!T()||typeof ShadowRoot>"u")&&(e instanceof ShadowRoot||e instanceof P(e).ShadowRoot)}function N(e){let{overflow:t,overflowX:n,overflowY:r,display:o}=Q(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function I(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function D(e){let t=j(),n=O(e)?Q(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some(e=>(n.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(n.contain||"").includes(e))}function j(){return!(typeof CSS>"u")&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function U(e){return["html","body","#document"].includes(R(e))}function Q(e){return P(e).getComputedStyle(e)}function F(e){return O(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function V(e){if("html"===R(e))return e;let t=e.assignedSlot||e.parentNode||L(e)&&e.host||A(e);return L(t)?t.host:t}function z(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function B(e){let t=Q(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,o=_(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,c=s(n)!==i||s(r)!==a;return c&&(n=i,r=a),{width:n,height:r,$:c}}function q(e){return O(e)?e:e.contextElement}function $(e){let t=q(e);if(!_(t))return l(1);let n=t.getBoundingClientRect(),{width:r,height:o,$:i}=B(t),a=(i?s(n.width):n.width)/r,c=(i?s(n.height):n.height)/o;return a&&Number.isFinite(a)||(a=1),c&&Number.isFinite(c)||(c=1),{x:a,y:c}}let H=l(0);function W(e){let t=P(e);return j()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:H}function G(e,t,n,r){var o;void 0===t&&(t=!1),void 0===n&&(n=!1);let i=e.getBoundingClientRect(),a=q(e),c=l(1);t&&(r?O(r)&&(c=$(r)):c=$(e));let u=(void 0===(o=n)&&(o=!1),r&&(!o||r===P(a))&&o)?W(a):l(0),s=(i.left+u.x)/c.x,d=(i.top+u.y)/c.y,f=i.width/c.x,p=i.height/c.y;if(a){let e=P(a),t=r&&O(r)?P(r):r,n=e,o=z(n);for(;o&&r&&t!==n;){let e=$(o),t=o.getBoundingClientRect(),r=Q(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;s*=e.x,d*=e.y,f*=e.x,p*=e.y,s+=i,d+=a,o=z(n=P(o))}}return E({width:f,height:p,x:s,y:d})}function Z(e,t){let n=F(e).scrollLeft;return t?t.left+n:G(A(e)).left+n}function J(e,t,n){let r;if("viewport"===t)r=function(e,t){let n=P(e),r=A(e),o=n.visualViewport,i=r.clientWidth,a=r.clientHeight,c=0,u=0;if(o){i=o.width,a=o.height;let e=j();(!e||e&&"fixed"===t)&&(c=o.offsetLeft,u=o.offsetTop)}return{width:i,height:a,x:c,y:u}}(e,n);else if("document"===t)r=function(e){let t=A(e),n=F(e),r=e.ownerDocument.body,o=u(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=u(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),a=-n.scrollLeft+Z(e),c=-n.scrollTop;return"rtl"===Q(r).direction&&(a+=u(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:c}}(A(e));else if(O(t))r=function(e,t){let n=G(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=_(e)?$(e):l(1),a=e.clientWidth*i.x;return{width:a,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{let n=W(e);r={...t,x:t.x-n.x,y:t.y-n.y}}return E(r)}function K(e){return"static"===Q(e).position}function Y(e,t){if(!_(e)||"fixed"===Q(e).position)return null;if(t)return t(e);let n=e.offsetParent;return A(e)===n&&(n=n.ownerDocument.body),n}function X(e,t){let n=P(e);if(I(e))return n;if(!_(e)){let t=V(e);for(;t&&!U(t);){if(O(t)&&!K(t))return t;t=V(t)}return n}let r=Y(e,t);for(;r&&["table","td","th"].includes(R(r))&&K(r);)r=Y(r,t);return r&&U(r)&&K(r)&&!D(r)?n:r||function(e){let t=V(e);for(;_(t)&&!U(t);){if(D(t))return t;if(I(t))break;t=V(t)}return null}(e)||n}let ee=async function(e){let t=this.getOffsetParent||X,n=this.getDimensions,r=await n(e.floating);return{reference:function(e,t,n){let r=_(t),o=A(t),i="fixed"===n,a=G(e,!0,i,t),c={scrollLeft:0,scrollTop:0},u=l(0);if(r||!r&&!i){if(("body"!==R(t)||N(o))&&(c=F(t)),r){let e=G(t,!0,i,t);u.x=e.x+t.clientLeft,u.y=e.y+t.clientTop}else o&&(u.x=Z(o))}let s=0,d=0;if(o&&!r&&!i){let e=o.getBoundingClientRect();d=e.top+c.scrollTop,s=e.left+c.scrollLeft-Z(o,e)}return{x:a.left+c.scrollLeft-u.x-s,y:a.top+c.scrollTop-u.y-d,width:a.width,height:a.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},et={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e,i="fixed"===o,a=A(r),c=!!t&&I(t.floating);if(r===a||c&&i)return n;let u={scrollLeft:0,scrollTop:0},s=l(1),d=l(0),f=_(r);if((f||!f&&!i)&&(("body"!==R(r)||N(a))&&(u=F(r)),_(r))){let e=G(r);s=$(r),d.x=e.x+r.clientLeft,d.y=e.y+r.clientTop}return{width:n.width*s.x,height:n.height*s.y,x:n.x*s.x-u.scrollLeft*s.x+d.x,y:n.y*s.y-u.scrollTop*s.y+d.y}},getDocumentElement:A,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e,i=[..."clippingAncestors"===n?I(t)?[]:function(e,t){let n=t.get(e);if(n)return n;let r=(function e(t,n,r){var o;void 0===n&&(n=[]);let i=function e(t){let n=V(t);return U(n)?t.ownerDocument?t.ownerDocument.body:t.body:_(n)&&N(n)?n:e(n)}(t),a=i===(null==(o=t.ownerDocument)?void 0:o.body),c=P(i);return a?(z(c),n.concat(c,c.visualViewport||[],N(i)?i:[],[])):n.concat(i,e(i,[]))})(e,[]).filter(e=>O(e)&&"body"!==R(e)),o=null,i="fixed"===Q(e).position,a=i?V(e):e;for(;O(a)&&!U(a);){let t=Q(a),n=D(a);n||"fixed"!==t.position||(o=null),(i?!n&&!o:!n&&"static"===t.position&&!!o&&["absolute","fixed"].includes(o.position)||N(a)&&!n&&function e(t,n){let r=V(t);return!(r===n||!O(r)||U(r))&&("fixed"===Q(r).position||e(r,n))}(e,a))?r=r.filter(e=>e!==a):o=t,a=V(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=i[0],s=i.reduce((e,n)=>{let r=J(t,n,o);return e.top=u(r.top,e.top),e.right=c(r.right,e.right),e.bottom=c(r.bottom,e.bottom),e.left=u(r.left,e.left),e},J(t,a,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:X,getElementRects:ee,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:n}=B(e);return{width:t,height:n}},getScale:$,isElement:O,isRTL:function(e){return"rtl"===Q(e).direction}},en=(e,t,n)=>{let r=new Map,o={platform:et,...n},i={...o.platform,_c:r};return k(e,t,{...o,platform:i})};var er="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self?self:{};function eo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ei={exports:{}};r=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},i=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch{return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function u(){for(var n=this.getLevel(),o=0;o<r.length;o++){var i=r[o];this[i]=o<n?e:this.methodFactory(i,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function s(e){return function(){typeof console!==t&&(u.call(this),this[e].apply(this,arguments))}}function l(r,o,i){var u;return"debug"===(u=r)&&(u="log"),typeof console!==t&&("trace"===u&&n?c:void 0!==console[u]?a(console,u):void 0!==console.log?a(console,"log"):e)||s.apply(this,arguments)}function d(e,n){var a,c,s,d=this,f="loglevel";function p(){var e;if(!(typeof window===t||!f)){try{e=window.localStorage[f]}catch{}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(f),o=n.indexOf(r+"=");-1!==o&&(e=/^([^;]+)/.exec(n.slice(o+r.length+1))[1])}catch{}return void 0===d.levels[e]&&(e=void 0),e}}function h(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||l,d.getLevel=function(){return s??c??a},d.setLevel=function(e,n){return s=h(e),!1!==n&&function(e){var n=(r[e]||"silent").toUpperCase();if(!(typeof window===t||!f)){try{window.localStorage[f]=n;return}catch{}try{window.document.cookie=encodeURIComponent(f)+"="+n+";"}catch{}}}(s),u.call(d)},d.setDefaultLevel=function(e){c=h(e),p()||d.setLevel(e,!1)},d.resetLevel=function(){s=null,function(){if(!(typeof window===t||!f)){try{window.localStorage.removeItem(f)}catch{}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),u.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(i!==d&&(a=h(i.getLevel())),u.call(d),i===d)for(var e in o)o[e].rebuild()},a=h(i?i.getLevel():"WARN");var v=p();null!=v&&(s=h(v)),u.call(d)}(i=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=o[e];return t||(t=o[e]=new d(e,i.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=f),i},i.getLoggers=function(){return o},i.default=i,i},ei.exports?ei.exports=r():er.log=r();let ea=eo(ei.exports);var ec=function(e,t){return(ec=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function eu(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ec(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function es(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(u){return function(c){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}}function el(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ed(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function ef(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function ep(e){return this instanceof ep?(this.v=e,this):new ep(e)}function eh(e){return"function"==typeof e}function ev(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var em=ev(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,t){return t+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function eg(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var eb=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i){if(this._parentage=null,Array.isArray(i))try{for(var a=el(i),c=a.next();!c.done;c=a.next())c.value.remove(this)}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else i.remove(this)}var u=this.initialTeardown;if(eh(u))try{u()}catch(e){o=e instanceof em?e.errors:[e]}var s=this._finalizers;if(s){this._finalizers=null;try{for(var l=el(s),d=l.next();!d.done;d=l.next()){var f=d.value;try{eE(f)}catch(e){o=o??[],e instanceof em?o=ef(ef([],ed(o)),ed(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(o)throw new em(o)}},t.prototype.add=function(e){var n;if(e&&e!==this){if(this.closed)eE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&eg(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&eg(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),ey=eb.EMPTY;function ew(e){return e instanceof eb||e&&"closed"in e&&eh(e.remove)&&eh(e.add)&&eh(e.unsubscribe)}function eE(e){eh(e)?e():e.unsubscribe()}var eS={Promise:void 0},ek={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,ef([e,t],ed(n)))},clearTimeout:function(e){var t=ek.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function eC(e){ek.setTimeout(function(){throw e})}function ex(){}var eT=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,ew(t)&&t.add(n)):n.destination=eA,n}return eu(t,e),t.create=function(e,t,n){return new eP(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(eb),eR=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){eC(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){eC(e)}else eC(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){eC(e)}},e}(),eP=function(e){function t(t,n,r){var o,i=e.call(this)||this;return o=eh(t)||!t?{next:t??void 0,error:n??void 0,complete:r??void 0}:t,i.destination=new eR(o),i}return eu(t,e),t}(eT),eA={closed:!0,next:ex,error:function(e){throw e},complete:ex},eM="function"==typeof Symbol&&Symbol.observable||"@@observable";function eO(e){return e}var e_=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o,i,a=(r=e)&&r instanceof eT||r&&eh(r.next)&&eh(r.error)&&eh(r.complete)&&ew(r)?e:new eP(e,t,n);return o=this.operator,i=this.source,a.add(o?o.call(a,i):i?this._subscribe(a):this._trySubscribe(a)),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=eL(t))(function(t,r){var o=new eP({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[eM]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?eO:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=eL(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function eL(e){var t;return null!==(t=e??eS.Promise)&&void 0!==t?t:Promise}function eN(e){return function(t){if(eh(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function eI(e,t,n,r,o){return new eD(e,t,n,r,o)}var eD=function(e){function t(t,n,r,o,i,a){var c=e.call(this,t)||this;return c.onFinalize=i,c.shouldUnsubscribe=a,c._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,c._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,c}return eu(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(eT),ej=ev(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),eU=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return eu(t,e),t.prototype.lift=function(e){var t=new eQ(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new ej},t.prototype.next=function(e){var t=this;(function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=el(t.currentObservers),i=o.next();!i.done;i=o.next())i.value.next(e)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}})()},t.prototype.error=function(e){var t=this;(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}})()},t.prototype.complete=function(){var e=this;(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})()},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this.hasError,r=this.isStopped,o=this.observers;return n||r?ey:(this.currentObservers=null,o.push(e),new eb(function(){t.currentObservers=null,eg(o,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()},t.prototype.asObservable=function(){var e=new e_;return e.source=this,e},t.create=function(e,t){return new eQ(e,t)},t}(e_),eQ=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return eu(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:ey},t}(eU),eF=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return eu(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n.closed||t.next(this._value),n},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,n=this._value;if(e)throw t;return this._throwIfClosed(),n},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(eU),eV=function(){return Date.now()},ez=function(e){function t(t,n){return e.call(this)||this}return eu(t,e),t.prototype.schedule=function(e,t){return this},t}(eb),eB={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,ef([e,t],ed(n)))},clearInterval:function(e){return clearInterval(e)}},eq=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return eu(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n,r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),eB.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&eB.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,eg(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(ez),e$=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=eV,e}(),eH=new(function(e){function t(t,n){void 0===n&&(n=e$.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return eu(t,e),t.prototype.flush=function(e){var t,n=this.actions;if(this._active){n.push(e);return}this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}},t}(e$))(eq),eW=new e_(function(e){return e.complete()});function eG(e){return e[e.length-1]}function eZ(e){var t;return(t=eG(e))&&eh(t.schedule)?e.pop():void 0}var eJ=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function eK(e){return eh(null==e?void 0:e.then)}function eY(e){return Symbol.asyncIterator&&eh(null==e?void 0:e[Symbol.asyncIterator])}function eX(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var e0="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function e1(e){return eh(null==e?void 0:e[e0])}function e5(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,s)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||c(e,t)})},t&&(r[e]=t(r[e])))}function c(e,t){try{var n;(n=o[e](t)).value instanceof ep?Promise.resolve(n.value.v).then(u,s):l(i[0][2],n)}catch(e){l(i[0][3],e)}}function u(e){c("next",e)}function s(e){c("throw",e)}function l(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}}(this,arguments,function(){var t,n,r;return es(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,ep(t.read())];case 3:return r=(n=o.sent()).value,n.done?[4,ep(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,ep(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function e2(e){return eh(null==e?void 0:e.getReader)}function e7(e){if(e instanceof e_)return e;if(null!=e){if(eh(e[eM]))return new e_(function(t){var n=e[eM]();if(eh(n.subscribe))return n.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(eJ(e))return new e_(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()});if(eK(e))return new e_(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,eC)});if(eY(e))return e6(e);if(e1(e))return new e_(function(t){var n,r;try{for(var o=el(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(t.next(a),t.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}t.complete()});if(e2(e))return e6(e5(e))}throw eX(e)}function e6(e){return new e_(function(t){(function(e,t){var n,r,o,i,a,c,u,s;return a=this,c=void 0,u=void 0,s=function(){var a;return es(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=el(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}(e),c.label=1;case 1:return[4,n.next()];case 2:if((r=c.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o={error:c.sent()},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new(u||(u=Promise))(function(e,t){function n(e){try{o(s.next(e))}catch(e){t(e)}}function r(e){try{o(s.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):((o=t.value)instanceof u?o:new u(function(e){e(o)})).then(n,r)}o((s=s.apply(a,c||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function e4(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);var i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function e3(e,t){return void 0===t&&(t=0),eN(function(n,r){n.subscribe(eI(r,function(n){return e4(r,e,function(){return r.next(n)},t)},function(){return e4(r,e,function(){return r.complete()},t)},function(n){return e4(r,e,function(){return r.error(n)},t)}))})}function e9(e,t){return void 0===t&&(t=0),eN(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function e8(e,t){if(!e)throw Error("Iterable cannot be null");return new e_(function(n){e4(n,t,function(){var r=e[Symbol.asyncIterator]();e4(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function te(e,t){return t?function(e,t){if(null!=e){if(eh(e[eM]))return e7(e).pipe(e9(t),e3(t));if(eJ(e))return new e_(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})});if(eK(e))return e7(e).pipe(e9(t),e3(t));if(eY(e))return e8(e,t);if(e1(e))return new e_(function(n){var r;return e4(n,t,function(){r=e[e0](),e4(n,t,function(){var e,t,o;try{t=(e=r.next()).value,o=e.done}catch(e){n.error(e);return}o?n.complete():n.next(t)},0,!0)}),function(){return eh(null==r?void 0:r.return)&&r.return()}});if(e2(e))return e8(e5(e),t)}throw eX(e)}(e,t):e7(e)}function tt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=eZ(e);return te(e,n)}var tn=ev(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function tr(e){throw new tn(e)}function to(e,t){return eN(function(n,r){var o=0;n.subscribe(eI(r,function(n){r.next(e.call(t,n,o++))}))})}var ti=Array.isArray;function ta(e,t,n){return void 0===n&&(n=1/0),eh(t)?ta(function(n,r){return to(function(e,o){return t(n,e,r,o)})(e7(e(n,r)))},n):("number"==typeof t&&(n=t),eN(function(t,r){var o,i,a,c,u,s,l;return o=n,i=[],a=0,c=0,u=!1,s=function(){!u||i.length||a||r.complete()},l=function(t){a++;var n=!1;e7(e(t,c++)).subscribe(eI(r,function(e){r.next(e)},function(){n=!0},void 0,function(){if(n)try{for(a--;i.length&&a<o;)!function(){var e=i.shift();l(e)}();s()}catch(e){r.error(e)}}))},t.subscribe(eI(r,function(e){return a<o?l(e):i.push(e)},function(){u=!0,s()})),function(){}}))}function tc(e){return void 0===e&&(e=1/0),ta(eO,e)}function tu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tc(1)(te(e,eZ(e)))}var ts=["addListener","removeListener"],tl=["addEventListener","removeEventListener"],td=["on","off"];function tf(e,t){return function(n){return function(r){return e[n](t,r)}}}function tp(e,t){return eN(function(n,r){var o=0;n.subscribe(eI(r,function(n){return e.call(t,n,o++)&&r.next(n)}))})}function th(e,t){return e===t}function tv(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=eZ(e);return eN(function(t,r){(n?tu(e,t,n):tu(e,t)).subscribe(r)})}function tm(e){return eN(function(t,n){e7(e).subscribe(eI(n,function(){return n.complete()},ex)),n.closed||t.subscribe(n)})}var tg=Object.defineProperty,tb=Object.defineProperties,ty=Object.getOwnPropertyDescriptors,tw=Object.getOwnPropertySymbols,tE=Object.prototype.hasOwnProperty,tS=Object.prototype.propertyIsEnumerable,tk=(e,t,n)=>t in e?tg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tC=(e,t)=>{for(var n in t||(t={}))tE.call(t,n)&&tk(e,n,t[n]);if(tw)for(var n of tw(t))tS.call(t,n)&&tk(e,n,t[n]);return e},tx=(e,t)=>tb(e,ty(t)),tT=(e,t,n)=>new Promise((r,o)=>{var i=e=>{try{c(n.next(e))}catch(e){o(e)}},a=e=>{try{c(n.throw(e))}catch(e){o(e)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,a);c((n=n.apply(e,t)).next())});function tR(e){var t;return!(typeof e>"u")&&(!!e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&"u">typeof(null==(t=e.publication)?void 0:t.track)||!!e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&"u">typeof e.publication)}function tP(e){return!!e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u"}function tA(e){if("string"==typeof e||"number"==typeof e)return`${e}`;if(tP(e))return`${e.participant.identity}_${e.source}_placeholder`;if(tR(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw Error(`Can't generate a id for the given track reference: ${e}`)}function tM(e,t){return void 0!==e&&void 0!==t&&(tR(e)&&tR(t)?e.publication.trackSid===t.publication.trackSid:tA(e)===tA(t))}function tO(e,t){return!(typeof t>"u")&&(tR(e)?t.some(t=>t.participant.identity===e.participant.identity&&tR(t)&&t.publication.trackSid===e.publication.trackSid):!!tP(e)&&t.some(t=>t.participant.identity===e.participant.identity&&tP(t)&&t.source===e.source))}function t_(){let e=document.createElement("p");e.style.width="100%",e.style.height="200px";let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);let n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),document.body.removeChild(t),n-r}function tL(){return"u">typeof document}var tN="[^\\.\\s@:](?:[^\\s@:]*[^\\s@:\\.])?@[^\\.\\s@]+(?:\\.[^\\.\\s@]+)*";function tI(e,t){return tT(this,null,function*(){var n,r;let{x:o,y:i}=yield en(e,t,{placement:"top",middleware:[{name:"offset",options:6,async fn(e){var t,n;let{x:r,y:o,placement:i,middlewareData:a}=e,c=await x(e,6);return i===(null==(t=a.offset)?void 0:t.placement)&&null!=(n=a.arrow)&&n.alignmentOffset?{}:{x:r+c.x,y:o+c.y,data:{...c,placement:i}}}},(void 0===n&&(n={}),{name:"flip",options:n,async fn(e){var t,r,o,i,a;let{placement:c,middlewareData:u,rects:s,initialPlacement:l,platform:d,elements:f}=e,{mainAxis:E=!0,crossAxis:S=!0,fallbackPlacements:k,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:R=!0,...P}=p(n,e);if(null!=(t=u.arrow)&&t.alignmentOffset)return{};let A=h(c),M=h(l)===l,O=await (null==d.isRTL?void 0:d.isRTL(f.floating)),_=k||(M||!R?[w(l)]:function(e){let t=w(e);return[y(e),t,y(t)]}(l));k||"none"===T||_.push(...function(e,t,n,r){let o=v(e),i=function(e,t,n){let r=["left","right"],o=["right","left"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(h(e),"start"===n,r);return o&&(i=i.map(e=>e+"-"+o),t&&(i=i.concat(i.map(y)))),i}(l,R,T,O));let L=[l,..._],N=await C(e,P),I=[],D=(null==(r=u.flip)?void 0:r.overflows)||[];if(E&&I.push(N[A]),S){let e=function(e,t,n){void 0===n&&(n=!1);let r=v(e),o=m(b(e)),i=g(o),a="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=w(a)),[a,w(a)]}(c,s,O);I.push(N[e[0]],N[e[1]])}if(D=[...D,{placement:c,overflows:I}],!I.every(e=>e<=0)){let e=((null==(o=u.flip)?void 0:o.index)||0)+1,t=L[e];if(t)return{data:{index:e,overflows:D},reset:{placement:t}};let n=null==(i=D.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:i.placement;if(!n)switch(x){case"bestFit":{let e=null==(a=D.map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:a[0];e&&(n=e);break}case"initialPlacement":n=l}if(c!==n)return{reset:{placement:n}}}return{}}}),{name:"shift",options:r={padding:5},async fn(e){let{x:t,y:n,placement:o}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=p(r,e),d={x:t,y:n},f=await C(e,l),v=b(h(o)),g=m(v),y=d[g],w=d[v];if(i){let e="y"===g?"top":"left",t="y"===g?"bottom":"right",n=y+f[e],r=y-f[t];y=u(n,c(y,r))}if(a){let e="y"===v?"top":"left",t="y"===v?"bottom":"right",n=w+f[e],r=w-f[t];w=u(n,c(w,r))}let E=s.fn({...e,[g]:y,[v]:w});return{...E,data:{x:E.x-t,y:E.y-n}}}}]});return{x:o,y:i}})}function tD(e,t){return!e.contains(t.target)}var tj=()=>({email:function({exact:e}={}){return e?RegExp(`^${tN}$`):RegExp(tN,"g")}(),url:function(e){e=tC({},e);let t=RegExp("(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}","g").source,n=`(?:(?:(?:[a-z]+:)?//)?|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|${t}|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`;return e.exact?RegExp(`(?:^${n}$)`,"i"):RegExp(n,"ig")}({})});function tU(e,t){let n=Object.entries(t).map(([t,n],r)=>Array.from(e.matchAll(n)).map(({index:e,0:n})=>({type:t,weight:r,content:n,index:e??0}))).flat().sort((e,t)=>{let n=e.index-t.index;return 0!==n?n:e.weight-t.weight}).filter(({index:e},t,n)=>{if(0===t)return!0;let r=n[t-1];return r.index+r.content.length<=e}),r=[],o=0;for(let{type:t,content:i,index:a}of n)a>o&&r.push(e.substring(o,a)),r.push({type:t,content:i}),o=a+i.length;return e.length>o&&r.push(e.substring(o)),r}var tQ=[i.TQ.ConnectionStateChanged,i.TQ.RoomMetadataChanged,i.TQ.ActiveSpeakersChanged,i.TQ.ConnectionQualityChanged,i.TQ.ParticipantConnected,i.TQ.ParticipantDisconnected,i.TQ.ParticipantPermissionsChanged,i.TQ.ParticipantMetadataChanged,i.TQ.ParticipantNameChanged,i.TQ.ParticipantAttributesChanged,i.TQ.TrackMuted,i.TQ.TrackUnmuted,i.TQ.TrackPublished,i.TQ.TrackUnpublished,i.TQ.TrackStreamStateChanged,i.TQ.TrackSubscriptionFailed,i.TQ.TrackSubscriptionPermissionChanged,i.TQ.TrackSubscriptionStatusChanged,i.TQ.LocalTrackPublished,i.TQ.LocalTrackUnpublished],tF=([...(i.dd.TrackPublished,i.dd.TrackUnpublished,i.dd.TrackMuted,i.dd.TrackUnmuted,i.dd.TrackStreamStateChanged,i.dd.TrackSubscribed,i.dd.TrackUnsubscribed,i.dd.TrackSubscriptionPermissionChanged,i.dd.TrackSubscriptionFailed,i.dd.LocalTrackPublished,i.dd.LocalTrackUnpublished,[i.dd.ConnectionQualityChanged,i.dd.IsSpeakingChanged,i.dd.ParticipantMetadataChanged,i.dd.ParticipantPermissionsChanged,i.dd.TrackMuted,i.dd.TrackUnmuted,i.dd.TrackPublished,i.dd.TrackUnpublished,i.dd.TrackStreamStateChanged,i.dd.TrackSubscriptionFailed,i.dd.TrackSubscriptionPermissionChanged,i.dd.TrackSubscriptionStatusChanged]),i.dd.LocalTrackPublished,i.dd.LocalTrackUnpublished],ea.getLogger("lk-components-js"));tF.setDefaultLevel("WARN");var tV=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}];function tz(){return"u">typeof navigator&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var tB=[],tq={showChat:!1,unreadMessages:0,showSettings:!1};function t$(e){return"object"==typeof e}function tH(e){return Array.isArray(e)&&e.filter(t$).length>0}function tW(e,t){var n,r,o,i;return(null!=(r=null==(n=e.joinedAt)?void 0:n.getTime())?r:0)-(null!=(i=null==(o=t.joinedAt)?void 0:o.getTime())?i:0)}function tG(e){let t=[],n=[],r=[],o=[];return e.forEach(e=>{e.participant.isLocal&&e.source===i.fQ.Source.Camera?t.push(e):e.source===i.fQ.Source.ScreenShare?n.push(e):e.source===i.fQ.Source.Camera?r.push(e):o.push(e)}),[...t,...function(e){let t=[],n=[];return e.forEach(e=>{e.participant.isLocal?t.push(e):n.push(e)}),t.sort((e,t)=>tW(e.participant,t.participant)),n.sort((e,t)=>tW(e.participant,t.participant)),[...n,...t]}(n),...function(e){let t=[],n=[];return e.forEach(e=>{e.participant.isLocal?t.push(e):n.push(e)}),n.sort((e,t)=>{var n,r,o,i,a,c,u,s,l;return e.participant.isSpeaking&&t.participant.isSpeaking?(n=e.participant,t.participant.audioLevel-n.audioLevel):e.participant.isSpeaking!==t.participant.isSpeaking?(r=e.participant,o=t.participant,r.isSpeaking===o.isSpeaking?0:r.isSpeaking?-1:1):e.participant.lastSpokeAt!==t.participant.lastSpokeAt?(i=e.participant,a=t.participant,void 0!==i.lastSpokeAt||void 0!==a.lastSpokeAt?(null!=(u=null==(c=a.lastSpokeAt)?void 0:c.getTime())?u:0)-(null!=(l=null==(s=i.lastSpokeAt)?void 0:s.getTime())?l:0):0):tR(e)!==tR(t)?tR(e)?tR(t)?0:-1:tR(t)?1:0:e.participant.isCameraEnabled!==t.participant.isCameraEnabled?function(e,t){let n=e.participant.isCameraEnabled;return n!==t.participant.isCameraEnabled?n?-1:1:0}(e,t):tW(e.participant,t.participant)}),[...t,...n]}(r),...o]}function tZ(e,t){return Array(Math.max(e.length,t.length)).fill([]).map((n,r)=>[e[r],t[r]])}function tJ(e,t,n){return e.filter(e=>!t.map(e=>n(e)).includes(n(e)))}function tK(e){return e.map(e=>"string"==typeof e||"number"==typeof e?`${e}`:tA(e))}function tY(e,t){let n=t.findIndex(t=>tA(t)===tA(e));if(-1===n)throw Error(`Element not part of the array: ${tA(e)} not in ${tK(t)}`);return n}function tX(e,t){return e.reduce((e,n,r)=>r%t==0?[...e,[n]]:[...e.slice(0,-1),[...e.slice(-1)[0],n]],[])}function t0(e,t,n){let r=e.map(e=>t.find(t=>tA(e)===tA(t)||"number"!=typeof e&&tP(e)&&tR(t)&&tP(e)&&tR(t)&&t.participant.identity===e.participant.identity&&t.source===e.source)??e);if(r.length<t.length){let e=tJ(t,r,tA);r=[...r,...e]}if(tZ(tX(r,n),tX(t,n)).forEach(([e,t],o)=>{if(e&&t){var i;let a={dropped:tJ(i=tX(r,n)[o],t,tA),added:tJ(t,i,tA)};(0!==a.added.length||0!==a.dropped.length)&&(tF.debug(`Detected visual changes on page: ${o}, current: ${tK(e)}, next: ${tK(t)}`,{changes:a}),a.added.length===a.dropped.length&&tZ(a.added,a.dropped).forEach(([e,t])=>{if(e&&t)r=function(e,t,n){let r=tY(e,n),o=tY(t,n);return n.splice(r,1,t),n.splice(o,1,e),n}(e,t,r);else throw Error(`For a swap action we need a addition and a removal one is missing: ${e}, ${t}`)}),0===a.added.length&&a.dropped.length>0&&a.dropped.forEach(e=>{r=function(e,t){let n=tY(e,t);return t.splice(n,1),t}(e,r)}),a.added.length>0&&0===a.dropped.length&&a.added.forEach(e=>{r=[...r,e]}))}}),r.length>t.length){let e=tJ(r,t,tA);r=r.filter(t=>!e.map(tA).includes(tA(t)))}return r}function t1(e){return`lk-${e}`}function t5(e){let t=t2(e),n=nr(e.participant).pipe(to(()=>t2(e)),tv(t));return{className:t1(e.source===i.fQ.Source.Camera||e.source===i.fQ.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function t2(e){if(tR(e))return e.publication;{let{source:t,name:n,participant:r}=e;if(t&&n)return r.getTrackPublications().find(e=>e.source===t&&e.trackName===n);if(n)return r.getTrackPublicationByName(n);if(t)return r.getTrackPublication(t);throw Error("At least one of source and name needs to be defined")}}function t7(e,...t){return new e_(n=>{let r=()=>{n.next(e)};return t.forEach(t=>{e.on(t,r)}),()=>{t.forEach(t=>{e.off(t,r)})}}).pipe(tv(e))}function t6(e,t){return new e_(n=>{let r=(...e)=>{n.next(e)};return e.on(t,r),()=>{e.off(t,r)}})}function t4(e){return t6(e,i.TQ.ConnectionStateChanged).pipe(to(([e])=>e),tv(e.state))}function t3(e,t,n=!0){var r,o;let a=()=>tT(this,null,function*(){try{let t=yield i.du.getLocalDevices(e,n);c.next(t)}catch(e){null==t||t(e)}}),c=new eU,u=c.pipe((o=()=>{var e;null==(e=null==navigator?void 0:navigator.mediaDevices)||e.removeEventListener("devicechange",a)},eN(function(e,t){try{e.subscribe(t)}finally{t.add(o)}})));if("u">typeof window){if(!window.isSecureContext)throw Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");null==(r=null==navigator?void 0:navigator.mediaDevices)||r.addEventListener("devicechange",a)}return tu(i.du.getLocalDevices(e,n).catch(e=>(null==t||t(e),[])),u)}function t9(e){return t7(e,i.TQ.AudioPlaybackStatusChanged).pipe(to(e=>({canPlayAudio:e.canPlaybackAudio})))}function t8(e){return t7(e,i.TQ.VideoPlaybackStatusChanged).pipe(to(e=>({canPlayVideo:e.canPlaybackVideo})))}function ne(e,t){return t6(e,i.TQ.ParticipantEncryptionStatusChanged).pipe(tp(([,n])=>(null==t?void 0:t.identity)===(null==n?void 0:n.identity)||!n&&(null==t?void 0:t.identity)===e.localParticipant.identity),to(([e])=>e),tv(null!=t&&t.isLocal?t.isE2EEEnabled:!!(null!=t&&t.isEncrypted)))}function nt(e){return t6(e,i.TQ.RecordingStatusChanged).pipe(to(([e])=>e),tv(e.isRecording))}function nn(e,...t){return new e_(n=>{let r=()=>{n.next(e)};return t.forEach(t=>{e.on(t,r)}),()=>{t.forEach(t=>{e.off(t,r)})}}).pipe(tv(e))}function nr(e){return nn(e,i.dd.TrackMuted,i.dd.TrackUnmuted,i.dd.ParticipantPermissionsChanged,i.dd.TrackPublished,i.dd.TrackUnpublished,i.dd.LocalTrackPublished,i.dd.LocalTrackUnpublished,i.dd.MediaDevicesError,i.dd.TrackSubscriptionStatusChanged).pipe(to(e=>{let{isMicrophoneEnabled:t,isCameraEnabled:n,isScreenShareEnabled:r}=e,o=e.getTrackPublication(i.fQ.Source.Microphone);return{isCameraEnabled:n,isMicrophoneEnabled:t,isScreenShareEnabled:r,cameraTrack:e.getTrackPublication(i.fQ.Source.Camera),microphoneTrack:o,participant:e}}))}function no(e,t){return new e_(n=>{let r=(...e)=>{n.next(e)};return e.on(t,r),()=>{e.off(t,r)}})}function ni(e){var t,n,r,o;return nn(e.participant,i.dd.TrackMuted,i.dd.TrackUnmuted,i.dd.TrackSubscribed,i.dd.TrackUnsubscribed,i.dd.LocalTrackPublished,i.dd.LocalTrackUnpublished).pipe(to(t=>{var n,r;let o=null!=(n=e.publication)?n:t.getTrackPublication(e.source);return null==(r=null==o?void 0:o.isMuted)||r}),tv(null==(o=null!=(r=null==(t=e.publication)?void 0:t.isMuted)?r:null==(n=e.participant.getTrackPublication(e.source))?void 0:n.isMuted)||o))}function na(e){return no(e,i.dd.IsSpeakingChanged).pipe(to(([e])=>e))}function nc(e){return no(e,i.dd.ParticipantPermissionsChanged).pipe(to(()=>e.permissions),tv(e.permissions))}function nu(e,t,n,r,o){let{localParticipant:a}=t,c=(e,t)=>{let n=!1;switch(e){case i.fQ.Source.Camera:n=t.isCameraEnabled;break;case i.fQ.Source.Microphone:n=t.isMicrophoneEnabled;break;case i.fQ.Source.ScreenShare:n=t.isScreenShareEnabled}return n},u=nr(a).pipe(to(t=>c(e,t.participant)),tv(c(e,a))),s=new eU;return{className:t1("button"),toggle:(t,c)=>tT(this,null,function*(){try{switch(c??(c=n),s.next(!0),e){case i.fQ.Source.Camera:return yield a.setCameraEnabled(t??!a.isCameraEnabled,c,r),a.isCameraEnabled;case i.fQ.Source.Microphone:return yield a.setMicrophoneEnabled(t??!a.isMicrophoneEnabled,c,r),a.isMicrophoneEnabled;case i.fQ.Source.ScreenShare:return yield a.setScreenShareEnabled(t??!a.isScreenShareEnabled,c,r),a.isScreenShareEnabled;default:throw TypeError("Tried to toggle unsupported source")}}catch(e){if(o&&e instanceof Error){null==o||o(e);return}throw e}finally{s.next(!1)}}),enabledObserver:u,pendingObserver:s.asObservable()}}function ns(){let e=!1,t=new eU,n=new eU;return{className:t1("button"),toggle:r=>tT(this,null,function*(){n.next(!0),e=r??!e,t.next(e),n.next(!1)}),enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}function nl(e,t,n){let r=new eF(void 0),o=t6(t,i.TQ.ActiveDeviceChanged).pipe(tp(([t])=>t===e),to(([e,t])=>(tF.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:e,deviceId:t}),t)));return{className:t1("media-device-select"),activeDeviceObservable:o,setActiveMediaDevice:(n,...o)=>tT(this,[n,...o],function*(n,o={}){var a,c,u;if(t){let s;tF.debug(`Switching active device of kind "${e}" with id ${n}.`),yield t.switchActiveDevice(e,n,o.exact);let l=null!=(a=t.getActiveDevice(e))?a:n;l!==n&&"default"!==n&&tF.info(`We tried to select the device with id (${n}), but the browser decided to select the device with id (${l}) instead.`),"audioinput"===e?s=null==(c=t.localParticipant.getTrackPublication(i.fQ.Source.Microphone))?void 0:c.track:"videoinput"===e&&(s=null==(u=t.localParticipant.getTrackPublication(i.fQ.Source.Camera))?void 0:u.track);let d="default"===n&&!s||"default"===n&&(null==s?void 0:s.mediaStreamTrack.label.startsWith("Default"));r.next(d?n:l)}})}}function nd(e){return{className:t1("disconnect-button"),disconnect:t=>{e.disconnect(t)}}}function nf(e){return{className:t1("connection-quality"),connectionQualityObserver:no(e,i.dd.ConnectionQualityChanged).pipe(to(([e])=>e),tv(e.connectionQuality))}}function np(e){let t="track-muted-indicator-camera";switch(e.source){case i.fQ.Source.Camera:t="track-muted-indicator-camera";break;case i.fQ.Source.Microphone:t="track-muted-indicator-microphone"}return{className:t1(t),mediaMutedObserver:ni(e)}}function nh(e){return{className:"lk-participant-name",infoObserver:e?nn(e,i.dd.ParticipantMetadataChanged,i.dd.ParticipantNameChanged).pipe(to(({name:e,identity:t,metadata:n})=>({name:e,identity:t,metadata:n})),tv({name:e.name,identity:e.identity,metadata:e.metadata})):void 0}}function nv(){return{className:t1("participant-tile")}}var nm={CHAT:"lk-chat-topic",CHAT_UPDATE:"lk-chat-update-topic"};function ng(e,t){return tT(this,arguments,function*(e,t,n={}){let{reliable:r,destinationIdentities:o,topic:i}=n;yield e.publishData(t,{destinationIdentities:o,topic:i,reliable:r})})}var nb=new TextEncoder,ny=new TextDecoder,nw=new Map,nE=e=>nb.encode(JSON.stringify(e)),nS=e=>JSON.parse(ny.decode(e));function nk(e,t){var n,r;let o=new eU,a=()=>{var t,n,r;return(null==(t=e.serverInfo)?void 0:t.edition)===1||!!(null!=(n=e.serverInfo)&&n.version)&&(0,i.n4)(null==(r=e.serverInfo)?void 0:r.version,"1.17.2")>0},{messageDecoder:c,messageEncoder:u,channelTopic:s,updateChannelTopic:l}=t??{},d=s??nm.CHAT,f=l??nm.CHAT_UPDATE,p=!1;nw.has(e)||(p=!0);let h=null!=(n=nw.get(e))?n:new Map,v=null!=(r=h.get(d))?r:new eU;if(h.set(d,v),nw.set(e,h),p){let{messageObservable:t}=function(e,t,n){let r;let o=Array.isArray(t)?t:[t];return{messageObservable:t6(e,i.TQ.DataReceived).pipe(tp(([,,,e])=>void 0===t||void 0!==e&&o.includes(e)),to(([e,t,,n])=>({payload:e,topic:n,from:t}))),isSendingObservable:new e_(e=>{r=e}),send:(t,...n)=>tT(this,[t,...n],function*(t,n={}){r.next(!0);try{yield ng(e.localParticipant,t,tC({topic:o[0]},n))}finally{r.next(!1)}})}}(e,[d,f]);t.pipe(tm(o)).subscribe(v)}let{chatObservable:m,send:g}=function(e){return{chatObservable:t6(e,i.TQ.ChatMessage),send:t=>tT(this,null,function*(){return yield e.localParticipant.sendChatMessage(t)}),edit:(t,n)=>tT(this,null,function*(){return yield e.localParticipant.editChatMessage(t,n)})}}(e),b=c??nS,y=(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=eZ(t),o=(e=1/0,"number"==typeof eG(t)?t.pop():e);return t.length?1===t.length?e7(t[0]):tc(o)(te(t,r)):eW})(v.pipe(to(e=>{let t=tx(tC({},b(e.payload)),{from:e.from});if(!0!=t.ignore)return t})),m.pipe(to(([e,t])=>tx(tC({},e),{from:t})))).pipe(function(e,t){var n;return eN((n=arguments.length>=2,function(r,o){var i=n,a=t,c=0;r.subscribe(eI(o,function(t){var n=c++;a=i?e(a,t,n):(i=!0,t),o.next(a)},void 0))}))}((e,t)=>{var n;if(!t)return e;if("id"in t&&e.find(e=>{var n,r;return(null==(n=e.from)?void 0:n.identity)===(null==(r=t.from)?void 0:r.identity)&&e.id===t.id})){let r=e.findIndex(e=>e.id===t.id);if(r>-1){let o=e[r];e[r]=tx(tC({},t),{timestamp:o.timestamp,editTimestamp:null!=(n=t.editTimestamp)?n:t.timestamp})}return[...e]}return[...e,t]},[]),tm(o)),w=new eF(!1),E=u??nE;return e.once(i.TQ.Disconnected,function(){o.next(),o.complete(),nw.delete(e)}),{messageObservable:y,isSendingObservable:w,send:t=>tT(this,null,function*(){w.next(!0);try{let n=yield g(t),r=E(tx(tC({},n),{ignore:a()}));return yield ng(e.localParticipant,r,{reliable:!0,topic:d}),n}finally{w.next(!1)}}),update:(t,n)=>tT(this,null,function*(){let r=Date.now();w.next(!0);try{let o=yield e.localParticipant.editChatMessage(t,"string"==typeof n?{id:n,message:"",timestamp:r}:n),i=E(o);return yield ng(e.localParticipant,i,{topic:f,reliable:!0}),o}finally{w.next(!1)}})}}function nC(){return{className:t1("start-audio-button"),roomAudioPlaybackAllowedObservable:t9,handleStartAudioPlayback:e=>tT(this,null,function*(){tF.info("Start Audio for room: ",e),yield e.startAudio()})}}function nx(){return{className:t1("start-audio-button"),roomVideoPlaybackAllowedObservable:t8,handleStartVideoPlayback:e=>tT(this,null,function*(){tF.info("Start Video for room: ",e),yield e.startVideo()})}}function nT(){return{className:[t1("button"),t1("chat-toggle")].join(" ")}}function nR(){return{className:[t1("button"),t1("focus-toggle-button")].join(" ")}}function nP(){return{className:"lk-room-container"}}function nA(e,t,n=!0){let r=[e.localParticipant,...Array.from(e.remoteParticipants.values())],o=[];return r.forEach(e=>{t.forEach(t=>{let r=Array.from(e.trackPublications.values()).filter(e=>e.source===t&&(!n||e.track)).map(t=>({participant:e,publication:t,source:t.source}));o.push(...r)})}),{trackReferences:o,participants:r}}function nM(e,t,n){var r,o;let a=null!=(r=n.additionalRoomEvents)?r:tQ,c=null==(o=n.onlySubscribed)||o;return t7(e,...Array.from(new Set([i.TQ.ParticipantConnected,i.TQ.ParticipantDisconnected,i.TQ.ConnectionStateChanged,i.TQ.LocalTrackPublished,i.TQ.LocalTrackUnpublished,i.TQ.TrackPublished,i.TQ.TrackUnpublished,i.TQ.TrackSubscriptionStatusChanged,...a]).values())).pipe(to(e=>{let n=nA(e,t,c);return tF.debug(`TrackReference[] was updated. (length ${n.trackReferences.length})`,n),n}),tv(nA(e,t,c)))}function nO(e,t=1e3){var n,r;if(null===e)return tt(!1);let o=(function e(t,n,r,o){if(eh(r)&&(o=r,r=void 0),o)return e(t,n,r).pipe((i=o,to(function(e){return ti(e)?i.apply(void 0,ef([],ed(e))):i(e)})));var i,a=ed(eh(t.addEventListener)&&eh(t.removeEventListener)?tl.map(function(e){return function(o){return t[e](n,o,r)}}):eh(t.addListener)&&eh(t.removeListener)?ts.map(tf(t,n)):eh(t.on)&&eh(t.off)?td.map(tf(t,n)):[],2),c=a[0],u=a[1];if(!c&&eJ(t))return ta(function(t){return e(t,n,r)})(e7(t));if(!c)throw TypeError("Invalid event target");return new e_(function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return c(t),function(){return u(t)}})})(e,"mousemove",{passive:!0}).pipe(to(()=>!0)),i=o.pipe(function(e,t){var n=e instanceof Date&&!isNaN(e)?{first:e}:"number"==typeof e?{each:e}:e,r=n.first,o=n.each,i=n.with,a=void 0===i?tr:i,c=n.scheduler,u=void 0===c?eH:c,s=n.meta,l=void 0===s?null:s;if(null==r&&null==o)throw TypeError("No timeout provided.");return eN(function(e,t){var n,i,c=null,s=0,d=function(e){i=e4(t,u,function(){try{n.unsubscribe(),e7(a({meta:l,lastValue:c,seen:s})).subscribe(t)}catch(e){t.error(e)}},e)};n=e.subscribe(eI(t,function(e){null==i||i.unsubscribe(),s++,t.next(c=e),o>0&&d(o)},void 0,void 0,function(){null!=i&&i.closed||null==i||i.unsubscribe(),c=null})),s||d(null!=r?"number"==typeof r?r:+r-u.now():o)})}({each:t,with:()=>tu(tt(!1),i.pipe(eN(function(e,t){var n=!1,r=eI(t,function(){null==r||r.unsubscribe(),n=!0},ex);e7(o).subscribe(r),e.subscribe(eI(t,function(e){return n&&t.next(e)}))})))}),(void 0===r&&(r=eO),n=n??th,eN(function(e,t){var o,i=!0;e.subscribe(eI(t,function(e){var a=r(e);(i||!n(o,a))&&(i=!1,o=a,t.next(e))}))})));return i}var n_={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default",username:""},{load:nL,save:nN}=(o="lk-user-choices",{load:()=>(function(e){if(typeof localStorage>"u"){tF.error("Local storage is not available.");return}try{let t=localStorage.getItem(e);if(!t){tF.warn(`Item with key ${e} does not exist in local storage.`);return}return JSON.parse(t)}catch(e){tF.error(`Error getting item from local storage: ${e}`);return}})(o),save:e=>(function(e,t){if(typeof localStorage>"u"){tF.error("Local storage is not available.");return}try{if(t){let n=Object.fromEntries(Object.entries(t).filter(([,e])=>""!==e));localStorage.setItem(e,JSON.stringify(n))}}catch(e){tF.error(`Error setting item to local storage: ${e}`)}})(o,e)});function nI(e,t=!1){!0!==t&&nN(e)}function nD(e,t=!1){var n,r,o,i,a;let c={videoEnabled:null!=(n=null==e?void 0:e.videoEnabled)?n:n_.videoEnabled,audioEnabled:null!=(r=null==e?void 0:e.audioEnabled)?r:n_.audioEnabled,videoDeviceId:null!=(o=null==e?void 0:e.videoDeviceId)?o:n_.videoDeviceId,audioDeviceId:null!=(i=null==e?void 0:e.audioDeviceId)?i:n_.audioDeviceId,username:null!=(a=null==e?void 0:e.username)?a:n_.username};if(t)return c;{let e=nL();return tC(tC({},c),e??{})}}function nj(e,t){if("show_chat"===t.msg)return{...e,showChat:!0,unreadMessages:0};if("hide_chat"===t.msg)return{...e,showChat:!1};if("toggle_chat"!==t.msg)return"unread_msg"===t.msg?{...e,unreadMessages:t.count}:"toggle_settings"===t.msg?{...e,showSettings:!e.showSettings}:{...e};{let t={...e,showChat:!e.showChat};return!0===t.showChat&&(t.unreadMessages=0),t}}function nU(e,t){return"set_pin"===t.msg?[t.trackReference]:"clear_pin"===t.msg?[]:{...e}}let nQ=a.createContext(void 0);function nF(){let e=a.useContext(nQ);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function nV(e){let t=nq();if(e??(e=t),!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function nz(){let[e,t]=a.useReducer(nU,tB),[n,r]=a.useReducer(nj,tq);return{pin:{dispatch:t,state:e},widget:{dispatch:r,state:n}}}function nB(e){let[t,n]=a.useReducer(nU,tB),[r,o]=a.useReducer(nj,tq);return e??{pin:{dispatch:n,state:t},widget:{dispatch:o,state:r}}}function nq(){return a.useContext(nQ)}let n$=a.createContext(void 0);function nH(){return a.useContext(n$)}function nW(e){let t=nH(),n=e??t;if(!n)throw Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}let nG=a.createContext(void 0);function nZ(){return a.useContext(nG)}function nJ(e){let t=nZ(),n=nH(),r=e??t??(null==n?void 0:n.participant);if(!r)throw Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return r}let nK=a.createContext(void 0);function nY(){let e=a.useContext(nK);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function nX(){return a.useContext(nK)}function n0(e){let t=nX(),n=e??t;if(!n)throw Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}let n1=a.createContext(void 0);function n5(e){let t=a.useContext(n1);if(!0===e){if(t)return t;throw Error("tried to access feature context, but none is present")}return t}},2104:function(e,t,n){"use strict";let r;n.d(t,{A:function(){return w},B:function(){return x},C:function(){return y},Y:function(){return D},a:function(){return h},b:function(){return A},c:function(){return v},d:function(){return m},e:function(){return E},f:function(){return T},g:function(){return R},h:function(){return O},i:function(){return p},j:function(){return d},k:function(){return M},l:function(){return C},m:function(){return I},n:function(){return g},o:function(){return k},p:function(){return P},q:function(){return l},r:function(){return S},t:function(){return _},w:function(){return L},y:function(){return N},z:function(){return f}});var o=n(6397),i=n(4553),a=n(460),c=n(3717);let u=e=>{let t=o.useRef(e);return o.useEffect(()=>{t.current=e}),t},s=()=>r||(r=function(){let e=!1,t=[],n=new Map;if(typeof window>"u")return;let r=new ResizeObserver((r,o)=>{t=t.concat(r),e||window.requestAnimationFrame(()=>{let r=new Set;for(let e=0;e<t.length;e++){if(r.has(t[e].target))continue;r.add(t[e].target);let i=n.get(t[e].target);null==i||i.forEach(n=>n(t[e],o))}t=[],e=!1}),e=!0});return{observer:r,subscribe(e,t){r.observe(e);let o=n.get(e)??[];o.push(t),n.set(e,o)},unsubscribe(e,t){let o=n.get(e)??[];if(1===o.length){r.unobserve(e),n.delete(e);return}let i=o.indexOf(t);-1!==i&&o.splice(i,1),n.set(e,o)}}}()),l=e=>{let[t,n]=o.useState({width:0,height:0});return o.useLayoutEffect(()=>{if(e.current){let{width:t,height:r}=e.current.getBoundingClientRect();n({width:t,height:r})}},[e.current]),function(e,t){let n=s(),r=u(t);o.useLayoutEffect(()=>{let t=!1,o=e.current;if(o)return null==n||n.subscribe(o,i),()=>{t=!0,null==n||n.unsubscribe(o,i)};function i(e,n){t||r.current(e,n)}},[e.current,n,r]),null==n||n.observer}(e,o.useCallback(e=>n(e.contentRect),[])),t};function d(e,t,n=!0){let[r,i]=o.useState(t);return o.useEffect(()=>{if(n&&i(t),typeof window>"u"||!e)return;let r=e.subscribe(i);return()=>r.unsubscribe()},[e,n]),r}function f(e){let t=e=>"u">typeof window&&window.matchMedia(e).matches,[n,r]=o.useState(t(e));function i(){r(t(e))}return o.useEffect(()=>{let t=window.matchMedia(e);return i(),t.addListener?t.addListener(i):t.addEventListener("change",i),()=>{t.removeListener?t.removeListener(i):t.removeEventListener("change",i)}},[e]),n}function p(e={}){let t=(0,i.c)(e.participant),{className:n,connectionQualityObserver:r}=o.useMemo(()=>(0,i.d)(t),[t]);return{className:n,quality:d(r,c.ZV.Unknown)}}function h(e){let t=(0,i.u)(e);return d(o.useMemo(()=>(0,i.e)(t),[t]),t.state)}function v(e){let t=(0,i.f)(),n=h(t);return{buttonProps:o.useMemo(()=>{let{className:r,disconnect:o}=(0,i.h)(t);return(0,a.m)(e,{className:r,onClick:()=>o(e.stopTracks??!0),disabled:n===c.em.Disconnected})},[t,e,n])}}function m({trackRef:e,props:t}){let n=(0,i.i)(e),r=(0,i.j)(),{className:c}=o.useMemo(()=>(0,i.k)(),[]),u=o.useMemo(()=>(0,i.m)(n,null==r?void 0:r.pin.state),[n,null==r?void 0:r.pin.state]);return{mergedProps:o.useMemo(()=>(0,a.m)(t,{className:c,onClick:e=>{var o,i,a,c,s;null==(o=t.onClick)||o.call(t,e),u?null==(a=null==r?void 0:(i=r.pin).dispatch)||a.call(i,{msg:"clear_pin"}):null==(s=null==r?void 0:(c=r.pin).dispatch)||s.call(c,{msg:"set_pin",trackReference:n})}}),[t,c,n,u,null==r?void 0:r.pin]),inFocus:u}}function g(e,t,n={}){let r=n.gridLayouts??i.G,{width:a,height:c}=l(e),u=(0,i.n)(r,t,a,c);return o.useEffect(()=>{e.current&&u&&(e.current.style.setProperty("--lk-col-count",null==u?void 0:u.columns.toString()),e.current.style.setProperty("--lk-row-count",null==u?void 0:u.rows.toString()))},[e,u]),{layout:u,containerWidth:a,containerHeight:c}}function b(e,t={}){var n,r;let a="string"==typeof e?t.participant:e.participant,c=(0,i.c)(a),u="string"==typeof e?{participant:c,source:e}:e,[s,l]=o.useState(!!(null!=(n=u.publication)&&n.isMuted||null!=(r=c.getTrackPublication(u.source))&&r.isMuted));return o.useEffect(()=>{let e=(0,i.o)(u).subscribe(l);return()=>e.unsubscribe()},[(0,i.p)(u)]),s}function y(e={}){let t=(0,i.u)(e.room),[n,r]=o.useState(t.localParticipant),[a,c]=o.useState(n.isMicrophoneEnabled),[u,s]=o.useState(n.isMicrophoneEnabled),[l,d]=o.useState(n.lastMicrophoneError),[f,p]=o.useState(n.lastCameraError),[h,v]=o.useState(n.isMicrophoneEnabled),[m,g]=o.useState(void 0),[b,y]=o.useState(void 0),w=e=>{s(e.isCameraEnabled),c(e.isMicrophoneEnabled),v(e.isScreenShareEnabled),y(e.cameraTrack),g(e.microphoneTrack),d(e.participant.lastMicrophoneError),p(e.participant.lastCameraError),r(e.participant)};return o.useEffect(()=>{let e=(0,i.t)(t.localParticipant).subscribe(w);return()=>e.unsubscribe()},[t]),{isMicrophoneEnabled:a,isScreenShareEnabled:h,isCameraEnabled:u,microphoneTrack:m,cameraTrack:b,lastMicrophoneError:l,lastCameraError:f,localParticipant:n}}function w(){let e=(0,i.f)();return d(o.useMemo(()=>(0,i.v)(e.localParticipant),[e]),e.localParticipant.permissions)}function E({kind:e,room:t,track:n,requestPermissions:r,onError:a}){let u=(0,i.w)(),s=o.useMemo(()=>t??u??new c.du,[t,u]),l=d(o.useMemo(()=>(0,i.x)(e,a,r),[e,r,a]),[]),[f,p]=o.useState((null==s?void 0:s.getActiveDevice(e))??"default"),{className:h,activeDeviceObservable:v,setActiveMediaDevice:m}=o.useMemo(()=>(0,i.y)(e,s),[e,s,n]);return o.useEffect(()=>{let e=v.subscribe(e=>{e&&(i.l.info("setCurrentDeviceId",e),p(e))});return()=>{null==e||e.unsubscribe()}},[v]),{devices:l,className:h,activeDeviceId:f,setActiveMediaDevice:m}}function S(e,t,n={}){let r=o.useRef([]),a=o.useRef(-1),c=t!==a.current,u="function"==typeof n.customSortFunction?n.customSortFunction(e):(0,i.z)(e),s=[...u];if(!1===c)try{s=(0,i.A)(r.current,u,t)}catch(e){i.l.error("Error while running updatePages(): ",e)}return c?r.current=u:r.current=s,a.current=t,s}function k(e,t){let[n,r]=o.useState(1),i=Math.max(Math.ceil(t.length/e),1);n>i&&r(i);let a=n*e,c=a-e,u=e=>{r(t=>"next"===e?t===i?t:t+1:1===t?t:t-1)},s=S(t,e).slice(c,a);return{totalPageCount:i,nextPage:()=>u("next"),prevPage:()=>u("previous"),setPage:e=>{e>i?r(i):e<1?r(1):r(e)},firstItemIndex:c,lastItemIndex:a,tracks:s,currentPage:n}}function C({trackRef:e,onParticipantClick:t,disableSpeakingIndicator:n,htmlProps:r}){let u=(0,i.i)(e),s=o.useMemo(()=>{let{className:e}=(0,i.D)();return(0,a.m)(r,{className:e,onClick:e=>{var n;if(null==(n=r.onClick)||n.call(r,e),"function"==typeof t){let e=u.publication??u.participant.getTrackPublication(u.source);t({participant:u.participant,track:e})}}})},[r,t,u.publication,u.source,u.participant]),l=u.participant.getTrackPublication(c.fQ.Source.Microphone),f=o.useMemo(()=>({participant:u.participant,source:c.fQ.Source.Microphone,publication:l}),[l,u.participant]),p=b(u),h=b(f),v=function(e){let t=(0,i.c)(e);return d(o.useMemo(()=>(0,i.q)(t),[t]),t.isSpeaking)}(u.participant),m=function(e){if(e.publication instanceof c.Zr){let t=e.publication.track;if(t){let{facingMode:e}=(0,c.ul)(t);return e}}return"undefined"}(u);return{elementProps:{"data-lk-audio-muted":h,"data-lk-video-muted":p,"data-lk-speaking":!0!==n&&v,"data-lk-local-participant":u.participant.isLocal,"data-lk-source":u.source,"data-lk-facing-mode":m,...s}}}function x(e){return e=(0,i.F)(e),o.useMemo(()=>(null==e?void 0:e.pin.state)!==void 0&&e.pin.state.length>=1?e.pin.state:[],[e.pin.state])}function T({room:e,props:t}){let n=(0,i.u)(e),{className:r,roomAudioPlaybackAllowedObservable:c,handleStartAudioPlayback:u}=o.useMemo(()=>(0,i.N)(),[]),{canPlayAudio:s}=d(o.useMemo(()=>c(n),[n,c]),{canPlayAudio:n.canPlaybackAudio});return{mergedProps:o.useMemo(()=>(0,a.m)(t,{className:r,onClick:()=>{u(n)},style:{display:s?"none":"block"}}),[t,r,s,u,n]),canPlayAudio:s}}function R({room:e,props:t}){let n=(0,i.u)(e),{className:r,roomVideoPlaybackAllowedObservable:c,handleStartVideoPlayback:u}=o.useMemo(()=>(0,i.O)(),[]),{canPlayVideo:s}=d(o.useMemo(()=>c(n),[n,c]),{canPlayVideo:n.canPlaybackVideo});return{mergedProps:o.useMemo(()=>(0,a.m)(t,{className:r,onClick:()=>{u(n)},style:{display:s?"none":"block"}}),[t,r,s,u,n]),canPlayVideo:s}}function P(e,t={}){let n=o.useRef(null),r=o.useRef(null),i=t.minSwipeDistance??50,a=e=>{r.current=null,n.current=e.targetTouches[0].clientX},c=e=>{r.current=e.targetTouches[0].clientX},u=o.useCallback(()=>{if(!n.current||!r.current)return;let e=n.current-r.current,o=e>i,a=e<-i;o&&t.onLeftSwipe&&t.onLeftSwipe(),a&&t.onRightSwipe&&t.onRightSwipe()},[i,t]);o.useEffect(()=>{let t=e.current;return t&&(t.addEventListener("touchstart",a,{passive:!0}),t.addEventListener("touchmove",c,{passive:!0}),t.addEventListener("touchend",u,{passive:!0})),()=>{t&&(t.removeEventListener("touchstart",a),t.removeEventListener("touchmove",c),t.removeEventListener("touchend",u))}},[e,u])}function A({props:e}){let{dispatch:t,state:n}=(0,i.a)().widget,{className:r}=o.useMemo(()=>(0,i.P)(),[]);return{mergedProps:o.useMemo(()=>(0,a.m)(e,{className:r,onClick:()=>{t&&t({msg:"toggle_chat"})},"aria-pressed":null!=n&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[e,r,t,n])}}function M(e){var t,n;let r=(0,i.i)(e),{className:a,mediaMutedObserver:c}=o.useMemo(()=>(0,i.Q)(r),[(0,i.p)(r)]);return{isMuted:d(c,!!(null!=(t=r.publication)&&t.isMuted||null!=(n=r.participant.getTrackPublication(r.source))&&n.isMuted)),className:a}}function O({source:e,onChange:t,initialState:n,captureOptions:r,publishOptions:c,onDeviceError:u,...s}){var l;let f=(0,i.w)(),p=null==(l=null==f?void 0:f.localParticipant)?void 0:l.getTrackPublication(e),h=o.useRef(!1),{toggle:v,className:m,pendingObserver:g,enabledObserver:b}=o.useMemo(()=>f?(0,i.S)(e,f,r,c,u):(0,i.T)(),[f,e,JSON.stringify(r),c]),y=d(g,!1),w=d(b,n??!!(null!=p&&p.isEnabled));o.useEffect(()=>{null==t||t(w,h.current),h.current=!1},[w,t]),o.useEffect(()=>{void 0!==n&&(i.l.debug("forcing initial toggle state",e,n),v(n))},[]);let E=o.useMemo(()=>(0,a.m)(s,{className:m}),[s,m]),S=o.useCallback(e=>{var t;h.current=!0,v().catch(()=>h.current=!1),null==(t=s.onClick)||t.call(s,e)},[s,v]);return{toggle:v,enabled:w,pending:y,track:p,buttonProps:{...E,"aria-pressed":w,"data-lk-source":e,"data-lk-enabled":w,disabled:y,onClick:S}}}function _(e=[c.fQ.Source.Camera,c.fQ.Source.Microphone,c.fQ.Source.ScreenShare,c.fQ.Source.ScreenShareAudio,c.fQ.Source.Unknown],t={}){let n=(0,i.u)(t.room),[r,a]=o.useState([]),[u,s]=o.useState([]),l=o.useMemo(()=>e.map(e=>(0,i.U)(e)?e.source:e),[JSON.stringify(e)]);return o.useEffect(()=>{let e=(0,i.V)(n,l,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe(({trackReferences:e,participants:t})=>{i.l.debug("setting track bundles",e,t),a(e),s(t)});return()=>e.unsubscribe()},[n,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),o.useMemo(()=>{if(!(0,i.W)(e))return r;{let t=function(e,t){let n=new Map;if((0,i.W)(e)){let r=e.filter(e=>e.withPlaceholder).map(e=>e.source);t.forEach(e=>{let t=e.getTrackPublications().map(e=>{var t;return null==(t=e.track)?void 0:t.source}).filter(e=>void 0!==e),o=Array.from(function(e,t){let n=new Set(e);for(let e of t)n.delete(e);return n}(new Set(r),new Set(t)));o.length>0&&n.set(e.identity,o)})}return n}(e,u),n=Array.from(r);return u.forEach(e=>{t.has(e.identity)&&(t.get(e.identity)??[]).forEach(t=>{r.find(({participant:n,publication:r})=>e.identity===n.identity&&r.source===t)||(i.l.debug(`Add ${t} placeholder for participant ${e.identity}.`),n.push({participant:e,source:t}))})}),n}},[r,u,e])}function L(e){let t=(0,i.f)(),n=h(t),r=o.useMemo(()=>n===c.em.Disconnected,[n]),a=o.useMemo(()=>(0,i.Z)(t,e),[t,e,r]),u=d(a.isSendingObservable,!1),s=d(a.messageObservable,[]);return{send:a.send,update:a.update,chatMessages:s,isSending:u}}function N(e={}){let[t,n]=o.useState((0,i._)(e.defaults,e.preventLoad??!1)),r=o.useCallback(e=>{n(t=>({...t,audioEnabled:e}))},[]),a=o.useCallback(e=>{n(t=>({...t,videoEnabled:e}))},[]),c=o.useCallback(e=>{n(t=>({...t,audioDeviceId:e}))},[]),u=o.useCallback(e=>{n(t=>({...t,videoDeviceId:e}))},[]),s=o.useCallback(e=>{n(t=>({...t,username:e}))},[]);return o.useEffect(()=>{(0,i.$)(t,e.preventSave??!1)},[t,e.preventSave]),{userChoices:t,saveAudioInputEnabled:r,saveVideoInputEnabled:a,saveAudioInputDeviceId:c,saveVideoInputDeviceId:u,saveUsername:s}}function I(e,t={}){let n=(0,i.c)(e),r=(0,i.u)(t.room);return d(o.useMemo(()=>(0,i.a0)(r,n),[r,n]),n.isLocal?n.isE2EEEnabled:!!(null!=n&&n.isEncrypted))}function D(e){let t=(0,i.u)(e),n=h(t);return d(o.useMemo(()=>(0,i.a8)(t),[t,n]),t.isRecording)}},6857:function(e,t,n){"use strict";n.d(t,{B:function(){return c}});var r=n(6397),o=n(3717),i=n(4553),a=n(2104);function c(e={}){let[t,c]=r.useState(!1),[u,s]=r.useState(!1),[l,d]=r.useState(!1),f=(0,a.C)().microphoneTrack,[p,h]=r.useState();e.trackRef&&(f=e.trackRef.publication);let v=r.useCallback(async t=>{if(t){let{KrispNoiseFilter:t,isKrispNoiseFilterSupported:r}=await n.e(553).then(n.bind(n,6963));if(!r()){i.l.warn("LiveKit-Krisp noise filter is not supported in this browser");return}p||h(t(e.filterOptions))}c(e=>(e!==t&&s(!0),t))},[]);return r.useEffect(()=>{var e;if(f&&f.track instanceof o.hp&&p){let n=f.track.getProcessor();n&&"livekit-noise-filter"===n.name?(s(!0),n.setEnabled(t).finally(()=>{s(!1),d(t)})):!n&&t&&(s(!0),null==(e=null==f?void 0:f.track)||e.setProcessor(p).then(()=>p.setEnabled(t)).then(()=>{d(!0)}).catch(e=>{d(!1),i.l.error("Krisp hook: error enabling filter",e)}).finally(()=>{s(!1)}))}},[t,f,p]),{setNoiseFilterEnabled:v,isNoiseFilterEnabled:l,isNoiseFilterPending:u,processor:p}}},3718:function(e,t,n){"use strict";n.d(t,{_T:function(){return l},tt:function(){return f},zc:function(){return v}});var r=n(6397),o=n(460),i=n(2811),a=n(2104),c=n(4553),u=n(3717);function s({messageFormatter:e,messageDecoder:t,messageEncoder:n,channelTopic:u,...s}){let l=r.useRef(null),d=r.useRef(null),f=r.useMemo(()=>({messageDecoder:t,messageEncoder:n,channelTopic:u}),[t,n,u]),{send:p,chatMessages:h,isSending:v}=(0,a.w)(f),m=(0,c.j)(),g=r.useRef(0);async function b(e){e.preventDefault(),l.current&&""!==l.current.value.trim()&&p&&(await p(l.current.value),l.current.value="",l.current.focus())}return r.useEffect(()=>{var e;d&&(null==(e=d.current)||e.scrollTo({top:d.current.scrollHeight}))},[d,h]),r.useEffect(()=>{var e,t,n,r,o;if(!m||0===h.length)return;if(null!=(e=m.widget.state)&&e.showChat&&h.length>0&&g.current!==(null==(t=h[h.length-1])?void 0:t.timestamp)){g.current=null==(n=h[h.length-1])?void 0:n.timestamp;return}let i=h.filter(e=>!g.current||e.timestamp>g.current).length,{widget:a}=m;i>0&&(null==(r=a.state)?void 0:r.unreadMessages)!==i&&(null==(o=a.dispatch)||o.call(a,{msg:"unread_msg",count:i}))},[h,null==m?void 0:m.widget]),r.createElement("div",{...s,className:"lk-chat"},r.createElement("div",{className:"lk-chat-header"},"Messages",m&&r.createElement(i.C,{className:"lk-close-button"},r.createElement(i.S,null))),r.createElement("ul",{className:"lk-list lk-chat-messages",ref:d},s.children?h.map((t,n)=>(0,o.c)(s.children,{entry:t,key:t.id??n,messageFormatter:e})):h.map((t,n,o)=>{let a=n>=1&&o[n-1].from===t.from,c=n>=1&&t.timestamp-o[n-1].timestamp<6e4;return r.createElement(i.a,{key:t.id??n,hideName:a,hideTimestamp:!1!==a&&c,entry:t,messageFormatter:e})})),r.createElement("form",{className:"lk-chat-form",onSubmit:b},r.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:v,ref:l,type:"text",placeholder:"Enter a message...",onInput:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),onKeyUp:e=>e.stopPropagation()}),r.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:v},"Send")))}function l({kind:e,initialSelection:t,onActiveDeviceChange:n,tracks:o,requestPermissions:a=!1,...u}){let[s,l]=r.useState(!1),[d,f]=r.useState([]),[p,h]=r.useState(!0),[v,m]=r.useState(a),g=(e,t)=>{c.l.debug("handle device change"),l(!1),null==n||n(e,t)},b=r.useRef(null),y=r.useRef(null);r.useLayoutEffect(()=>{s&&m(!0)},[s]),r.useLayoutEffect(()=>{b.current&&y.current&&(d||p)&&(0,c.am)(b.current,y.current).then(({x:e,y:t})=>{y.current&&Object.assign(y.current.style,{left:`${e}px`,top:`${t}px`})}),h(!1)},[b,y,d,p]);let w=r.useCallback(e=>{y.current&&e.target!==b.current&&s&&(0,c.an)(y.current,e)&&l(!1)},[s,y,b]);return r.useEffect(()=>(document.addEventListener("click",w),window.addEventListener("resize",()=>h(!0)),()=>{document.removeEventListener("click",w),window.removeEventListener("resize",()=>h(!0))}),[w,h]),r.createElement(r.Fragment,null,r.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":s,...u,onClick:()=>l(!s),ref:b},u.children),!u.disabled&&r.createElement("div",{className:"lk-device-menu",ref:y,style:{visibility:s?"visible":"hidden"}},e?r.createElement(i.M,{initialSelection:t,onActiveDeviceChange:t=>g(e,t),onDeviceListChange:f,kind:e,track:null==o?void 0:o[e],requestPermissions:v}):r.createElement(r.Fragment,null,r.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),r.createElement(i.M,{kind:"audioinput",onActiveDeviceChange:e=>g("audioinput",e),onDeviceListChange:f,track:null==o?void 0:o.audioinput,requestPermissions:v}),r.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),r.createElement(i.M,{kind:"videoinput",onActiveDeviceChange:e=>g("videoinput",e),onDeviceListChange:f,track:null==o?void 0:o.videoinput,requestPermissions:v}))))}function d(){r.useEffect(()=>{(0,o.w)()},[])}function f({defaults:e={},onValidate:t,onSubmit:n,onError:s,debug:f,joinLabel:p="Join Room",micLabel:h="Microphone",camLabel:v="Camera",userLabel:m="Username",persistUserChoices:g=!0,videoProcessor:b,...y}){let{userChoices:w,saveAudioInputDeviceId:E,saveAudioInputEnabled:S,saveVideoInputDeviceId:k,saveVideoInputEnabled:C,saveUsername:x}=(0,a.y)({defaults:e,preventSave:!g,preventLoad:!g}),[T,R]=r.useState(w),[P,A]=r.useState(T.audioEnabled),[M,O]=r.useState(T.videoEnabled),[_,L]=r.useState(T.audioDeviceId),[N,I]=r.useState(T.videoDeviceId),[D,j]=r.useState(T.username);r.useEffect(()=>{S(P)},[P,S]),r.useEffect(()=>{C(M)},[M,C]),r.useEffect(()=>{E(_)},[_,E]),r.useEffect(()=>{k(N)},[N,k]),r.useEffect(()=>{x(D)},[D,x]);let U=function(e,t){let[n,i]=r.useState(),a=r.useMemo(()=>new u.WU,[]);return r.useEffect(()=>{let n=!1,r=[];return a.lock().then(async o=>{try{(e.audio||e.video)&&(r=await (0,u.Ai)(e),n?r.forEach(e=>e.stop()):i(r))}catch(e){t&&e instanceof Error?t(e):c.l.error(e)}finally{o()}}),()=>{n=!0,r.forEach(e=>{e.stop()})}},[JSON.stringify(e,o.r),t,a]),n}({audio:!!P&&{deviceId:w.audioDeviceId},video:!!M&&{deviceId:w.videoDeviceId,processor:b}},s),Q=r.useRef(null),F=r.useMemo(()=>null==U?void 0:U.filter(e=>e.kind===u.fQ.Kind.Video)[0],[U]),V=r.useMemo(()=>{if(!F)return"undefined";{let{facingMode:e}=(0,u.ul)(F);return e}},[F]),z=r.useMemo(()=>null==U?void 0:U.filter(e=>e.kind===u.fQ.Kind.Audio)[0],[U]);r.useEffect(()=>(Q.current&&F&&(F.unmute(),F.attach(Q.current)),()=>{null==F||F.detach()}),[F]);let[B,q]=r.useState(),$=r.useCallback(e=>"function"==typeof t?t(e):""!==e.username,[t]);return r.useEffect(()=>{let e={username:D,videoEnabled:M,videoDeviceId:N,audioEnabled:P,audioDeviceId:_};R(e),q($(e))},[D,M,$,P,_,N]),d(),r.createElement("div",{className:"lk-prejoin",...y},r.createElement("div",{className:"lk-video-container"},F&&r.createElement("video",{ref:Q,width:"1280",height:"720","data-lk-facing-mode":V}),(!F||!M)&&r.createElement("div",{className:"lk-camera-off-note"},r.createElement(i.b,null))),r.createElement("div",{className:"lk-button-group-container"},r.createElement("div",{className:"lk-button-group audio"},r.createElement(i.T,{initialState:P,source:u.fQ.Source.Microphone,onChange:e=>A(e)},h),r.createElement("div",{className:"lk-button-group-menu"},r.createElement(l,{initialSelection:_,kind:"audioinput",disabled:!z,tracks:{audioinput:z},onActiveDeviceChange:(e,t)=>L(t)}))),r.createElement("div",{className:"lk-button-group video"},r.createElement(i.T,{initialState:M,source:u.fQ.Source.Camera,onChange:e=>O(e)},v),r.createElement("div",{className:"lk-button-group-menu"},r.createElement(l,{initialSelection:N,kind:"videoinput",disabled:!F,tracks:{videoinput:F},onActiveDeviceChange:(e,t)=>I(t)})))),r.createElement("form",{className:"lk-username-container"},r.createElement("input",{className:"lk-form-control",id:"username",name:"username",type:"text",defaultValue:D,placeholder:m,onChange:e=>j(e.target.value),autoComplete:"off"}),r.createElement("button",{className:"lk-button lk-join-button",type:"submit",onClick:function(e){e.preventDefault(),$(T)?"function"==typeof n&&n(T):c.l.warn("Validation failed with: ",T)},disabled:!B},p)),f&&r.createElement(r.Fragment,null,r.createElement("strong",null,"User Choices:"),r.createElement("ul",{className:"lk-list",style:{overflow:"hidden",maxWidth:"15rem"}},r.createElement("li",null,"Username: ",`${T.username}`),r.createElement("li",null,"Video Enabled: ",`${T.videoEnabled}`),r.createElement("li",null,"Audio Enabled: ",`${T.audioEnabled}`),r.createElement("li",null,"Video Device: ",`${T.videoDeviceId}`),r.createElement("li",null,"Audio Device: ",`${T.audioDeviceId}`))))}let p=r.forwardRef(function(e,t){let{mergedProps:n}=function({props:e}){let{dispatch:t,state:n}=(0,c.a)().widget,i="lk-button lk-settings-toggle";return{mergedProps:r.useMemo(()=>(0,o.m)(e,{className:i,onClick:()=>{t&&t({msg:"toggle_settings"})},"aria-pressed":null!=n&&n.showSettings?"true":"false"}),[e,i,t,n])}}({props:e});return r.createElement("button",{ref:t,...n},e.children)});function h({variation:e,controls:t,saveUserChoices:n=!0,onDeviceError:s,...d}){var f;let[h,v]=r.useState(!1),m=(0,c.j)();r.useEffect(()=>{var e,t;(null==(e=null==m?void 0:m.widget.state)?void 0:e.showChat)!==void 0&&v(null==(t=null==m?void 0:m.widget.state)?void 0:t.showChat)},[null==(f=null==m?void 0:m.widget.state)?void 0:f.showChat]);let g=(0,a.z)(`(max-width: ${h?1e3:760}px)`)?"minimal":"verbose";e??(e=g);let b={leave:!0,...t},y=(0,a.A)();y?(b.camera??(b.camera=y.canPublish),b.microphone??(b.microphone=y.canPublish),b.screenShare??(b.screenShare=y.canPublish),b.chat??(b.chat=y.canPublishData&&(null==t?void 0:t.chat))):(b.camera=!1,b.chat=!1,b.microphone=!1,b.screenShare=!1);let w=r.useMemo(()=>"minimal"===e||"verbose"===e,[e]),E=r.useMemo(()=>"textOnly"===e||"verbose"===e,[e]),S=(0,c.ao)(),[k,C]=r.useState(!1),x=r.useCallback(e=>{C(e)},[C]),T=(0,o.a)({className:"lk-control-bar"},d),{saveAudioInputEnabled:R,saveVideoInputEnabled:P,saveAudioInputDeviceId:A,saveVideoInputDeviceId:M}=(0,a.y)({preventSave:!n}),O=r.useCallback((e,t)=>t?R(e):null,[R]),_=r.useCallback((e,t)=>t?P(e):null,[P]);return r.createElement("div",{...T},b.microphone&&r.createElement("div",{className:"lk-button-group"},r.createElement(i.T,{source:u.fQ.Source.Microphone,showIcon:w,onChange:O,onDeviceError:e=>null==s?void 0:s({source:u.fQ.Source.Microphone,error:e})},E&&"Microphone"),r.createElement("div",{className:"lk-button-group-menu"},r.createElement(l,{kind:"audioinput",onActiveDeviceChange:(e,t)=>A(t??"default")}))),b.camera&&r.createElement("div",{className:"lk-button-group"},r.createElement(i.T,{source:u.fQ.Source.Camera,showIcon:w,onChange:_,onDeviceError:e=>null==s?void 0:s({source:u.fQ.Source.Camera,error:e})},E&&"Camera"),r.createElement("div",{className:"lk-button-group-menu"},r.createElement(l,{kind:"videoinput",onActiveDeviceChange:(e,t)=>M(t??"default")}))),b.screenShare&&S&&r.createElement(i.T,{source:u.fQ.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:w,onChange:x,onDeviceError:e=>null==s?void 0:s({source:u.fQ.Source.ScreenShare,error:e})},E&&(k?"Stop screen share":"Share screen")),b.chat&&r.createElement(i.C,null,w&&r.createElement(i.c,null),E&&"Chat"),b.settings&&r.createElement(p,null,w&&r.createElement(i.d,null),E&&"Settings"),b.leave&&r.createElement(i.D,null,w&&r.createElement(i.e,null),E&&"Leave"),r.createElement(i.f,null))}function v({chatMessageFormatter:e,chatMessageDecoder:t,chatMessageEncoder:n,SettingsComponent:o,...l}){var f,p;let[v,m]=r.useState({showChat:!1,unreadMessages:0,showSettings:!1}),g=r.useRef(null),b=(0,a.t)([{source:u.fQ.Source.Camera,withPlaceholder:!0},{source:u.fQ.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[u.TQ.ActiveSpeakersChanged],onlySubscribed:!1}),y=(0,c.ap)(),w=b.filter(c.a1).filter(e=>e.publication.source===u.fQ.Source.ScreenShare),E=null==(f=(0,a.B)(y))?void 0:f[0],S=b.filter(e=>!(0,c.aq)(e,E));return r.useEffect(()=>{var e,t,n,r,o,i;if(w.some(e=>e.publication.isSubscribed)&&null===g.current?(c.l.debug("Auto set screen share focus:",{newScreenShareTrack:w[0]}),null==(t=(e=y.pin).dispatch)||t.call(e,{msg:"set_pin",trackReference:w[0]}),g.current=w[0]):g.current&&!w.some(e=>{var t,n;return e.publication.trackSid===(null==(n=null==(t=g.current)?void 0:t.publication)?void 0:n.trackSid)})&&(c.l.debug("Auto clearing screen share focus."),null==(r=(n=y.pin).dispatch)||r.call(n,{msg:"clear_pin"}),g.current=null),E&&!(0,c.a1)(E)){let e=b.find(e=>e.participant.identity===E.participant.identity&&e.source===E.source);e!==E&&(0,c.a1)(e)&&(null==(i=(o=y.pin).dispatch)||i.call(o,{msg:"set_pin",trackReference:e}))}},[w.map(e=>`${e.publication.trackSid}_${e.publication.isSubscribed}`).join(),null==(p=null==E?void 0:E.publication)?void 0:p.trackSid,b]),d(),r.createElement("div",{className:"lk-video-conference",...l},(0,c.ar)()&&r.createElement(i.L,{value:y,onWidgetChange:e=>{c.l.debug("updating widget state",e),m(e)}},r.createElement("div",{className:"lk-video-conference-inner"},E?r.createElement("div",{className:"lk-focus-layout-wrapper"},r.createElement(i.F,null,r.createElement(i.g,{tracks:S},r.createElement(i.P,null)),E&&r.createElement(i.h,{trackRef:E}))):r.createElement("div",{className:"lk-grid-layout-wrapper"},r.createElement(i.G,{tracks:b},r.createElement(i.P,null))),r.createElement(h,{controls:{chat:!0,settings:!!o}})),r.createElement(s,{style:{display:v.showChat?"grid":"none"},messageFormatter:e,messageEncoder:n,messageDecoder:t}),o&&r.createElement("div",{className:"lk-settings-menu-modal",style:{display:v.showSettings?"block":"none"}},r.createElement(o,null))),r.createElement(i.R,null),r.createElement(i.i,null))}},460:function(e,t,n){"use strict";n.d(t,{L:function(){return v},a:function(){return l},c:function(){return d},m:function(){return u},r:function(){return p},w:function(){return f}});var r=n(6397),o=n(4553),i=n(3717),a=n(2780);function c(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=function e(t){var n,r,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(n=0;n<i;n++)t[n]&&(r=e(t[n]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r)}return o}(e))&&(r&&(r+=" "),r+=t);return r}function u(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],o=r[e];"function"==typeof n&&"function"==typeof o&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=function(...e){return(...t)=>{for(let n of e)if("function"==typeof n)try{n(...t)}catch(e){console.error(e)}}}(n,o):("className"===e||"UNSAFE_className"===e)&&"string"==typeof n&&"string"==typeof o?t[e]=c(n,o):t[e]=void 0!==o?o:n}}return t}function s(e){return void 0!==e}function l(...e){return u(...e.filter(s))}function d(e,t,n){return r.Children.map(e,o=>r.isValidElement(o)&&r.Children.only(e)?(o.props.class&&(t??(t={}),t.class=c(o.props.class,t.class),t.style={...o.props.style,...t.style}),r.cloneElement(o,{...t,key:n})):o)}function f(e){var t,n;if("u">typeof window&&"u">typeof a&&((null==(t=null==a?void 0:a.env)?void 0:t.NODE_ENV)==="dev"||(null==(n=null==a?void 0:a.env)?void 0:n.NODE_ENV)==="development")){let e=document.querySelector(".lk-room-container");e&&!getComputedStyle(e).getPropertyValue("--lk-has-imported-styles")&&o.l.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}function p(e,t){return"processor"===e&&t&&"object"==typeof t&&"name"in t?t.name:"e2ee"===e&&t?"e2ee-enabled":t}let h={connect:!0,audio:!1,video:!1},v=r.forwardRef(function(e,t){let{room:n,htmlProps:a}=function(e){let{token:t,serverUrl:n,options:a,room:c,connectOptions:s,connect:l,audio:d,video:f,screen:v,onConnected:m,onDisconnected:g,onError:b,onMediaDeviceFailure:y,onEncryptionError:w,simulateParticipants:E,...S}={...h,...e};a&&c&&o.l.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");let[k,C]=r.useState(),x=r.useRef(l);r.useEffect(()=>{C(c??new i.du(a))},[c,JSON.stringify(a,p)]);let T=r.useMemo(()=>{let{className:e}=(0,o.s)();return u(S,{className:e})},[S]);return r.useEffect(()=>{if(!k)return;let e=()=>{let e=k.localParticipant;o.l.debug("trying to publish local tracks"),Promise.all([e.setMicrophoneEnabled(!!d,"boolean"!=typeof d?d:void 0),e.setCameraEnabled(!!f,"boolean"!=typeof f?f:void 0),e.setScreenShareEnabled(!!v,"boolean"!=typeof v?v:void 0)]).catch(e=>{o.l.warn(e),null==b||b(e)})},t=e=>{let t=i.CB.getFailure(e);null==y||y(t)},n=e=>{null==w||w(e)},r=e=>{null==g||g(e)},a=()=>{null==m||m()};return k.on(i.TQ.SignalConnected,e).on(i.TQ.MediaDevicesError,t).on(i.TQ.EncryptionError,n).on(i.TQ.Disconnected,r).on(i.TQ.Connected,a),()=>{k.off(i.TQ.SignalConnected,e).off(i.TQ.MediaDevicesError,t).off(i.TQ.EncryptionError,n).off(i.TQ.Disconnected,r).off(i.TQ.Connected,a)}},[k,d,f,v,b,w,y,m,g]),r.useEffect(()=>{if(k){if(E){k.simulateParticipants({participants:{count:E},publish:{audio:!0,useRealTracks:!0}});return}if(l){if(x.current=!0,o.l.debug("connecting"),!t){o.l.debug("no token yet");return}if(!n){o.l.warn("no livekit url provided"),null==b||b(Error("no livekit url provided"));return}k.connect(n,t,s).catch(e=>{o.l.warn(e),!0===x.current&&(null==b||b(e))})}else o.l.debug("disconnecting because connect is false"),x.current=!1,k.disconnect()}},[l,t,JSON.stringify(s),k,b,n,E]),r.useEffect(()=>{if(k)return()=>{o.l.info("disconnecting on onmount"),k.disconnect()}},[k]),{room:k,htmlProps:T}}(e);return r.createElement("div",{ref:t,...a},n&&r.createElement(o.R.Provider,{value:n},r.createElement(o.L.Provider,{value:e.featureFlags},e.children)))})}}]);
//# sourceMappingURL=433-b0a6e8479e657d70.js.map