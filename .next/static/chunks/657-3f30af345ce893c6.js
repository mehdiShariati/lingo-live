(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[657],{7324:function(e,n,s){"use strict";s.d(n,{a:function(){return x}});var i=s(4048),t=s(6397),r=s(4553),c=s(3717),d=s(1358),l=s(2263),o=s(4464),a=s.n(o),u=s(2780);let h=e=>{let{logLevel:n}=e,s=(0,r.f)();t.useEffect(()=>((0,c.Ub)(null!=n?n:"debug"),u.env.NEXT_PUBLIC_DATADOG_CLIENT_TOKEN&&u.env.NEXT_PUBLIC_DATADOG_SITE&&(console.log("setting up datadog logs"),l.fy.init({clientToken:u.env.NEXT_PUBLIC_DATADOG_CLIENT_TOKEN,site:u.env.NEXT_PUBLIC_DATADOG_SITE,forwardErrorsToLogs:!0,sessionSampleRate:100}),(0,c.qt)((e,n,s)=>{switch(e){case c.in.debug:l.fy.logger.debug(n,s);break;case c.in.info:l.fy.logger.info(n,s);break;case c.in.warn:l.fy.logger.warn(n,s);break;case c.in.error:l.fy.logger.error(n,s)}})),window.__lk_room=s,()=>{window.__lk_room=void 0}),[s,n])},x=e=>{let{logLevel:n}=e,s=(0,r.f)(),[c,l]=t.useState(!1),[,o]=t.useState({}),[u,x]=t.useState("");if(t.useEffect(()=>{s.getSid().then(x)},[s]),h({logLevel:n}),t.useEffect(()=>{if(window){let e=(0,d.Fj)(window,{"Shift+D":()=>{console.log("setting open"),l(e=>!e)}}),n=setInterval(()=>{o({})},1e3);return()=>{e(),clearInterval(n)}}},[c]),!c)return null;let j=s.localParticipant;return c?(0,i.jsxs)("div",{className:a().overlay,children:[(0,i.jsx)("section",{id:"room-info",children:(0,i.jsxs)("h3",{children:["Room Info ",s.name,": ",u]})}),(0,i.jsxs)("details",{open:!0,children:[(0,i.jsx)("summary",{children:(0,i.jsxs)("b",{children:["Local Participant: ",j.identity]})}),(0,i.jsxs)("details",{open:!0,className:a().detailsSection,children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"Published tracks"})}),(0,i.jsx)("div",{children:Array.from(j.trackPublications.values()).map(e=>{var n,s,t,r;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsxs)("i",{children:[e.source.toString(),"\xa0",(0,i.jsx)("span",{children:e.trackSid})]})}),(0,i.jsx)("table",{children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Kind"}),(0,i.jsxs)("td",{children:[e.kind,"\xa0","video"===e.kind&&(0,i.jsxs)("span",{children:[null===(s=e.track)||void 0===s?void 0:null===(n=s.dimensions)||void 0===n?void 0:n.width,"x",null===(r=e.track)||void 0===r?void 0:null===(t=r.dimensions)||void 0===t?void 0:t.height]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Bitrate"}),(0,i.jsxs)("td",{children:[Math.ceil(e.track.currentBitrate/1e3)," kbps"]})]})]})})]})})})]}),(0,i.jsxs)("details",{open:!0,className:a().detailsSection,children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"Permissions"})}),(0,i.jsx)("div",{children:(0,i.jsx)("table",{children:(0,i.jsx)("tbody",{children:j.permissions&&Object.entries(j.permissions).map(e=>{let[n,s]=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:n}),"canPublishSources"!==n?(0,i.jsx)("td",{children:s.toString()}):(0,i.jsxs)("td",{children:[" ",s.join(", ")," "]})]})})})})})})]})]}),(0,i.jsxs)("details",{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("b",{children:"Remote Participants"})}),Array.from(s.remoteParticipants.values()).map(e=>(0,i.jsxs)("details",{className:a().detailsSection,children:[(0,i.jsx)("summary",{children:(0,i.jsxs)("b",{children:[e.identity,(0,i.jsx)("span",{})]})}),(0,i.jsx)("div",{children:Array.from(e.trackPublications.values()).map(e=>{var n,s;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsxs)("i",{children:[e.source.toString(),"\xa0",(0,i.jsx)("span",{children:e.trackSid})]})}),(0,i.jsx)("table",{children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Kind"}),(0,i.jsxs)("td",{children:[e.kind,"\xa0","video"===e.kind&&(0,i.jsxs)("span",{children:[null===(n=e.dimensions)||void 0===n?void 0:n.width,"x",null===(s=e.dimensions)||void 0===s?void 0:s.height]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Status"}),(0,i.jsx)("td",{children:e.isSubscribed?e.isEnabled?"enabled":"disabled":"unsubscribed"})]}),e.track&&(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Bitrate"}),(0,i.jsxs)("td",{children:[Math.ceil(e.track.currentBitrate/1e3)," kbps"]})]})]})})]})})})]},e.sid))]})]}):(0,i.jsx)(i.Fragment,{})}},431:function(e,n,s){"use strict";s.d(n,{T:function(){return j}});var i=s(4048),t=s(6397),r=s(3717),c=s(4553),d=s(2104),l=s(2811),o=s(3718),a=s(6857),u=s(9661),h=s.n(u),x=s(2780);function j(e){let n=(0,c.j)(),s=(0,c.f)(),u=x.env.NEXT_PUBLIC_LK_RECORD_ENDPOINT,j=t.useMemo(()=>({media:{camera:!0,microphone:!0,label:"Media Devices",speaker:!0},effects:{label:"Effects"},recording:u?{label:"Recording"}:void 0}),[]),m=t.useMemo(()=>Object.keys(j).filter(e=>void 0!==e),[j]),[g,f]=t.useState(m[0]),{isNoiseFilterEnabled:b,setNoiseFilterEnabled:p,isNoiseFilterPending:v}=(0,a.B)();t.useEffect(()=>{p(!0)},[]);let k=(0,d.Y)(),[_,N]=t.useState(k),[S,E]=t.useState(!1);t.useEffect(()=>{_!==k&&E(!1)},[k,_]);let y=async()=>{let e;if(!u)throw TypeError("No recording endpoint specified");if(s.isE2EEEnabled)throw Error("Recording of encrypted meetings is currently not supported");E(!0),N(k),(e=k?await fetch(u+"/stop?roomName=".concat(s.name)):await fetch(u+"/start?roomName=".concat(s.name))).ok||(console.error("Error handling recording request, check server logs:",e.status,e.statusText),E(!1))};return(0,i.jsxs)("div",{className:"settings-menu",style:{width:"100%"},...e,children:[(0,i.jsx)("div",{className:h().tabs,children:m.map(e=>j[e]&&(0,i.jsx)("button",{className:"".concat(h().tab," lk-button"),onClick:()=>f(e),"aria-pressed":e===g,children:j[e].label},e))}),(0,i.jsxs)("div",{className:"tab-content",children:["media"===g&&(0,i.jsxs)(i.Fragment,{children:[j.media&&j.media.camera&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{children:"Camera"}),(0,i.jsxs)("section",{className:"lk-button-group",children:[(0,i.jsx)(l.T,{source:r.fQ.Source.Camera,children:"Camera"}),(0,i.jsx)("div",{className:"lk-button-group-menu",children:(0,i.jsx)(o._T,{kind:"videoinput"})})]})]}),j.media&&j.media.microphone&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{children:"Microphone"}),(0,i.jsxs)("section",{className:"lk-button-group",children:[(0,i.jsx)(l.T,{source:r.fQ.Source.Microphone,children:"Microphone"}),(0,i.jsx)("div",{className:"lk-button-group-menu",children:(0,i.jsx)(o._T,{kind:"audioinput"})})]})]}),j.media&&j.media.speaker&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{children:"Speaker & Headphones"}),(0,i.jsxs)("section",{className:"lk-button-group",children:[(0,i.jsx)("span",{className:"lk-button",children:"Audio Output"}),(0,i.jsx)("div",{className:"lk-button-group-menu",children:(0,i.jsx)(o._T,{kind:"audiooutput"})})]})]})]}),"effects"===g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{children:"Audio"}),(0,i.jsxs)("section",{children:[(0,i.jsx)("label",{htmlFor:"noise-filter",children:" Enhanced Noise Cancellation"}),(0,i.jsx)("input",{type:"checkbox",id:"noise-filter",onChange:e=>p(e.target.checked),checked:b,disabled:v})]})]}),"recording"===g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{children:"Record Meeting"}),(0,i.jsxs)("section",{children:[(0,i.jsx)("p",{children:k?"Meeting is currently being recorded":"No active recordings for this meeting"}),(0,i.jsxs)("button",{disabled:S,onClick:()=>y(),children:[k?"Stop":"Start"," Recording"]})]})]})]}),(0,i.jsx)("button",{className:"lk-button ".concat(h().settingsCloseButton),onClick:()=>{var e,s;return null==n?void 0:null===(e=(s=n.widget).dispatch)||void 0===e?void 0:e.call(s,{msg:"toggle_settings"})},children:"Close"})]})}},8787:function(e,n,s){"use strict";function i(e){return encodeURIComponent(e)}function t(e){return decodeURIComponent(e)}function r(){return"".concat(c(4),"-").concat(c(4))}function c(e){let n="",s="abcdefghijklmnopqrstuvwxyz0123456789",i=s.length;for(let t=0;t<e;t++)n+=s.charAt(Math.floor(Math.random()*i));return n}s.d(n,{FZ:function(){return t},O1:function(){return c},lO:function(){return i},qP:function(){return r}})},4464:function(e){e.exports={overlay:"Debug_overlay__SZwFO",detailsSection:"Debug_detailsSection__vJYFV"}},9661:function(e){e.exports={settingsCloseButton:"SettingsMenu_settingsCloseButton__mdSd2",tabs:"SettingsMenu_tabs__uq0cC",tab:"SettingsMenu_tab__Pfa2A"}}}]);
//# sourceMappingURL=657-3f30af345ce893c6.js.map